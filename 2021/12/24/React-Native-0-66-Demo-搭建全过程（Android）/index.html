<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>React Native 0.66 Demo 搭建全过程（Android） - Admvli2016&#039;s Blog</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Admvli2016&#039;s Blog"><meta name="msapplication-TileImage" content="/img/favicon-reset.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Admvli2016&#039;s Blog"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="开发环境搭建（Android）本文 Demo 是在 Windows 10 - 64位系统上搭建的。 搭建开发环境 · React Native 中文网 参照上述博文，需要安装的软件 123Node   			v12.22.0JDK     		jdk1.8.0_221Android Studio		v4.2.2  安装 Node可参照下面的博文安装 nvm，通过 nvm 来安装 node 、管理"><meta property="og:type" content="blog"><meta property="og:title" content="React Native 0.66 Demo 搭建全过程（Android）"><meta property="og:url" content="http://example.com/2021/12/24/React-Native-0-66-Demo-%E6%90%AD%E5%BB%BA%E5%85%A8%E8%BF%87%E7%A8%8B%EF%BC%88Android%EF%BC%89/"><meta property="og:site_name" content="Admvli2016&#039;s Blog"><meta property="og:description" content="开发环境搭建（Android）本文 Demo 是在 Windows 10 - 64位系统上搭建的。 搭建开发环境 · React Native 中文网 参照上述博文，需要安装的软件 123Node   			v12.22.0JDK     		jdk1.8.0_221Android Studio		v4.2.2  安装 Node可参照下面的博文安装 nvm，通过 nvm 来安装 node 、管理"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_345529_Rh7jWrVBFHpl3C9C_1630234703%5B1%5D.png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_282878_6TASNn0oOwuGSfzv_1630234777%5B1%5D.png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_702431_W7TFWoJY5BlE_e7J_1630234796%5B1%5D.png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_379115_CvsTHfHlWBA6PdA3_1630234816%5B1%5D.png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_277098_DJEFqUBOB3A5F-I7_1633922191%5B1%5D.png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_96772_KkSC55Fow4GGsrQL_1633922212%5B1%5D.png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_916043_lGTGr8tXtRfmYZiJ_1633922262%5B1%5D.png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_883769_NVw7zP5eMy9X6Uu3_1633922280%5B1%5D.png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_86724_El_pnSTPm9rqXXwa_1633922298%5B1%5D.png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_992911_UUVZgPV0a_TV7yZO_1633922326%5B1%5D.png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_35586_P1tbQjKrzx_AeWXs_1633922347%5B1%5D.png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_303555_1L8zvXlP9v2U1fYm_1633922432%5B1%5D.png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_66463_-LCNucY5KKUa_y-Z_1633922452%5B1%5D.png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_472594__hORnmIMDFX6YZAS_1633922594%5B1%5D.png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_733902_O895YbwdkbImTtzv_1633922643%5B1%5D.png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_362628_m-EPGMTP33wQj6WU_1633922661%5B1%5D.png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_356419_93jK7q4CT5gWDoKz_1633922689%5B1%5D.png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_819747_NK6l5Mu-Lo7ZwQZm_1633922713%5B1%5D.png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_68143_MI2fTrLafrSam6Mr_1633922798%5B1%5D.png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_228389_3iFrHBctCQ3CD76p_1633922818%5B1%5D.png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_654757_N6woAU3-AZc43EIl_1633922843%5B1%5D.png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_789500_IuLagJ_jcCznqjif_1633922952%5B1%5D.png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_440222_ezdFEgfPAPagvnVF_1633923177%5B1%5D.png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_639304_q6IMEkH12ckfFAXZ_1633923757%5B1%5D.jpg"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_992736_4M0vb_AE9s_I5HXg_1633923780%5B1%5D.png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_771117_XG_v4kDCCoC9QHrU_1633930037%5B1%5D.gif"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_792252_HXKw6Ja_nDutYjyp_1633930092%5B1%5D.png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_25441_F3xsslM-_b_2EYN9_1633930182%5B1%5D.png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_721387_rghYsPLoJbr0z5rR_1633930196%5B1%5D.png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_27737_OSYOi-wnzUAn1iwv_1633930248%5B1%5D.png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_703180_WZJ_rDAz2w9p-Ioc_1633930271%5B1%5D.png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_371613_BirOivdgmzvUWvmG_1633930404%5B1%5D.png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_602580_KdkxvfEp12_LcJzW_1633930448%5B1%5D.png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_322593_91B0oJVe_3Tr9PA5_1633930477%5B1%5D.png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_805035_kecamPqHqgwehTvO_1633930532%5B1%5D.png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_928436_pd-H_o_XQqS31CRZ_1633930557%5B1%5D.png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_670502_JqWbuxzGdqzpaVQU_1633930606%5B1%5D.png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_241804_SXO9VYEqReVk4K9R_1633930646%5B1%5D.png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_75152_TFBkEpy6Dw6bAmYP_1633930855%5B1%5D.jpg"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_766254_Lv2vT6kZggCpHei4_1633931002%5B1%5D.png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_634054_tzurNxZz-1a0PtVN_1633931293%5B1%5D.png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_174670_CONMH5Jc-ywwSjOZ_1633931326%5B1%5D.jpg"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_427945_dscszb9WbxmgTYyg_1634265863%5B1%5D.jpg"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_697542_F-gHDwv2aAub92F5_1634266287%5B1%5D.jpg"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_562762_f4ES8JQyxtfpGYno_1634266428%5B1%5D.jpg"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_855203_uCnmY2dpQ263ZiRo_1634266452%5B1%5D.jpg"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_962893_85eHVKBd6zCKSgqa_1634266500%5B1%5D.jpg"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_247691_-blEoGK5QM7-JyNH_1634266525%5B1%5D.jpg"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_784323_u7UEYJoVUBJEwwdq_1634266548%5B1%5D.jpg"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_612777_UeZYFNHTw1lBQJ3r_1634266896%5B1%5D.jpg"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_904911_NGh3e3Q-W_mjrA-m_1634268975%5B1%5D.png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_170198_9Sfy3saq12PWdwwj_1634269013%5B1%5D.png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_925910_1h7OqL6DA6jQn7_r_1634269163%5B1%5D.png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_266337_g8J5b8NJAZu2ol8W_1634269217%5B1%5D.png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_693616_7d7KCrS7ZPTYC4bw_1634275330%5B1%5D.jpg"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_285296_y4aOvaNxMT0P-KQg_1634275887%5B1%5D.png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_205196_3DiAI_-7-8CVHMhH_1634276274%5B1%5D.jpg"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_796422_b8k81z41OxZCQBX2_1634277059%5B1%5D.png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_645950_Cv59qVYquBW35Tmb_1634277478%5B1%5D.jpg"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_685314_lBzQ1Q3GmOrgI8o__1634267469%5B1%5D.png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_379580_h0khrK7zbr-zVeBp_1634267505%5B1%5D.jpg"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_470545_mPOh6Pc5eaBKESHG_1634268402%5B1%5D.png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_866733_Moa7gWr6iVkheGQV_1634268438%5B1%5D.png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_995630_bES5y_eS747vJYe6_1633932021%5B1%5D.png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_354722_KOFaSQtcq3S7x8Tk_1633932066%5B1%5D.png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/image-20211224181307772.png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_148146_uvpXNleOFDACgNKf_1633932439%5B1%5D.png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_226936_UOa2BZMbYDyRzLRC_1633932466%5B1%5D.png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_434709_9zsXGWL2TrZFqTWA_1633932526%5B1%5D.png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_117047_8G-IE2VzFhvJILsH_1633932677%5B1%5D.jpg"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_191471_wqrXEDFBaFJkO53z_1633932778%5B1%5D.png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_682730_lSo0SsFDpnbwU_SR_1633932792%5B1%5D.jpg"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_483791_XjS-dkrztHCIVLgg_1633932815%5B1%5D.png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_499164_EOonuITRSvOTbGZN_1633932907%5B1%5D.png"><meta property="article:published_time" content="2021-12-24T10:43:42.000Z"><meta property="article:modified_time" content="2024-08-21T09:47:32.023Z"><meta property="article:author" content="admvli2016"><meta property="article:tag" content="Android"><meta property="article:tag" content="React Native"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_345529_Rh7jWrVBFHpl3C9C_1630234703%5B1%5D.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://example.com/2021/12/24/React-Native-0-66-Demo-%E6%90%AD%E5%BB%BA%E5%85%A8%E8%BF%87%E7%A8%8B%EF%BC%88Android%EF%BC%89/"},"headline":"React Native 0.66 Demo 搭建全过程（Android）","image":["https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_345529_Rh7jWrVBFHpl3C9C_1630234703%5B1%5D.png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_282878_6TASNn0oOwuGSfzv_1630234777%5B1%5D.png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_702431_W7TFWoJY5BlE_e7J_1630234796%5B1%5D.png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_379115_CvsTHfHlWBA6PdA3_1630234816%5B1%5D.png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_277098_DJEFqUBOB3A5F-I7_1633922191%5B1%5D.png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_96772_KkSC55Fow4GGsrQL_1633922212%5B1%5D.png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_916043_lGTGr8tXtRfmYZiJ_1633922262%5B1%5D.png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_883769_NVw7zP5eMy9X6Uu3_1633922280%5B1%5D.png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_86724_El_pnSTPm9rqXXwa_1633922298%5B1%5D.png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_992911_UUVZgPV0a_TV7yZO_1633922326%5B1%5D.png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_35586_P1tbQjKrzx_AeWXs_1633922347%5B1%5D.png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_303555_1L8zvXlP9v2U1fYm_1633922432%5B1%5D.png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_66463_-LCNucY5KKUa_y-Z_1633922452%5B1%5D.png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_472594__hORnmIMDFX6YZAS_1633922594%5B1%5D.png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_733902_O895YbwdkbImTtzv_1633922643%5B1%5D.png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_362628_m-EPGMTP33wQj6WU_1633922661%5B1%5D.png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_356419_93jK7q4CT5gWDoKz_1633922689%5B1%5D.png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_819747_NK6l5Mu-Lo7ZwQZm_1633922713%5B1%5D.png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_68143_MI2fTrLafrSam6Mr_1633922798%5B1%5D.png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_228389_3iFrHBctCQ3CD76p_1633922818%5B1%5D.png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_654757_N6woAU3-AZc43EIl_1633922843%5B1%5D.png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_789500_IuLagJ_jcCznqjif_1633922952%5B1%5D.png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_440222_ezdFEgfPAPagvnVF_1633923177%5B1%5D.png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_639304_q6IMEkH12ckfFAXZ_1633923757%5B1%5D.jpg","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_992736_4M0vb_AE9s_I5HXg_1633923780%5B1%5D.png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_771117_XG_v4kDCCoC9QHrU_1633930037%5B1%5D.gif","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_792252_HXKw6Ja_nDutYjyp_1633930092%5B1%5D.png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_25441_F3xsslM-_b_2EYN9_1633930182%5B1%5D.png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_721387_rghYsPLoJbr0z5rR_1633930196%5B1%5D.png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_27737_OSYOi-wnzUAn1iwv_1633930248%5B1%5D.png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_703180_WZJ_rDAz2w9p-Ioc_1633930271%5B1%5D.png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_371613_BirOivdgmzvUWvmG_1633930404%5B1%5D.png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_602580_KdkxvfEp12_LcJzW_1633930448%5B1%5D.png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_322593_91B0oJVe_3Tr9PA5_1633930477%5B1%5D.png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_805035_kecamPqHqgwehTvO_1633930532%5B1%5D.png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_928436_pd-H_o_XQqS31CRZ_1633930557%5B1%5D.png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_670502_JqWbuxzGdqzpaVQU_1633930606%5B1%5D.png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_241804_SXO9VYEqReVk4K9R_1633930646%5B1%5D.png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_75152_TFBkEpy6Dw6bAmYP_1633930855%5B1%5D.jpg","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_766254_Lv2vT6kZggCpHei4_1633931002%5B1%5D.png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_634054_tzurNxZz-1a0PtVN_1633931293%5B1%5D.png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_174670_CONMH5Jc-ywwSjOZ_1633931326%5B1%5D.jpg","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_427945_dscszb9WbxmgTYyg_1634265863%5B1%5D.jpg","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_697542_F-gHDwv2aAub92F5_1634266287%5B1%5D.jpg","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_562762_f4ES8JQyxtfpGYno_1634266428%5B1%5D.jpg","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_855203_uCnmY2dpQ263ZiRo_1634266452%5B1%5D.jpg","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_962893_85eHVKBd6zCKSgqa_1634266500%5B1%5D.jpg","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_247691_-blEoGK5QM7-JyNH_1634266525%5B1%5D.jpg","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_784323_u7UEYJoVUBJEwwdq_1634266548%5B1%5D.jpg","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_612777_UeZYFNHTw1lBQJ3r_1634266896%5B1%5D.jpg","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_904911_NGh3e3Q-W_mjrA-m_1634268975%5B1%5D.png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_170198_9Sfy3saq12PWdwwj_1634269013%5B1%5D.png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_925910_1h7OqL6DA6jQn7_r_1634269163%5B1%5D.png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_266337_g8J5b8NJAZu2ol8W_1634269217%5B1%5D.png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_693616_7d7KCrS7ZPTYC4bw_1634275330%5B1%5D.jpg","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_285296_y4aOvaNxMT0P-KQg_1634275887%5B1%5D.png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_205196_3DiAI_-7-8CVHMhH_1634276274%5B1%5D.jpg","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_796422_b8k81z41OxZCQBX2_1634277059%5B1%5D.png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_645950_Cv59qVYquBW35Tmb_1634277478%5B1%5D.jpg","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_685314_lBzQ1Q3GmOrgI8o__1634267469%5B1%5D.png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_379580_h0khrK7zbr-zVeBp_1634267505%5B1%5D.jpg","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_470545_mPOh6Pc5eaBKESHG_1634268402%5B1%5D.png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_866733_Moa7gWr6iVkheGQV_1634268438%5B1%5D.png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_995630_bES5y_eS747vJYe6_1633932021%5B1%5D.png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_354722_KOFaSQtcq3S7x8Tk_1633932066%5B1%5D.png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/image-20211224181307772.png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_148146_uvpXNleOFDACgNKf_1633932439%5B1%5D.png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_226936_UOa2BZMbYDyRzLRC_1633932466%5B1%5D.png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_434709_9zsXGWL2TrZFqTWA_1633932526%5B1%5D.png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_117047_8G-IE2VzFhvJILsH_1633932677%5B1%5D.jpg","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_191471_wqrXEDFBaFJkO53z_1633932778%5B1%5D.png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_682730_lSo0SsFDpnbwU_SR_1633932792%5B1%5D.jpg","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_483791_XjS-dkrztHCIVLgg_1633932815%5B1%5D.png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_499164_EOonuITRSvOTbGZN_1633932907%5B1%5D.png"],"datePublished":"2021-12-24T10:43:42.000Z","dateModified":"2024-08-21T09:47:32.023Z","author":{"@type":"Person","name":"admvli2016"},"publisher":{"@type":"Organization","name":"Admvli2016's Blog","logo":{"@type":"ImageObject","url":{"text":"Admvli2016's Blog"}}},"description":"开发环境搭建（Android）本文 Demo 是在 Windows 10 - 64位系统上搭建的。 搭建开发环境 · React Native 中文网 参照上述博文，需要安装的软件 123Node   \t\t\tv12.22.0JDK     \t\tjdk1.8.0_221Android Studio\t\tv4.2.2  安装 Node可参照下面的博文安装 nvm，通过 nvm 来安装 node 、管理"}</script><link rel="canonical" href="http://example.com/2021/12/24/React-Native-0-66-Demo-%E6%90%AD%E5%BB%BA%E5%85%A8%E8%BF%87%E7%A8%8B%EF%BC%88Android%EF%BC%89/"><link rel="icon" href="/img/favicon-reset.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><!--!--><!--!--><meta name="generator" content="Hexo 5.4.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/">Admvli2016&#039;s Blog</a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">主页</a><a class="navbar-item" href="/tags">标签</a><a class="navbar-item" href="/categories">分类</a><a class="navbar-item" href="/archives">归档</a><a class="navbar-item" href="/about">关于</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/admvli2016"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-9-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-12-24T10:43:42.000Z" title="2021/12/24 下午6:43:42">2021-12-24</time>发表</span><span class="level-item"><time dateTime="2024-08-21T09:47:32.023Z" title="2024/8/21 下午5:47:32">2024-08-21</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E5%BC%80%E5%8F%91/">移动端开发</a></span><span class="level-item">1 小时读完 (大约7401个字)</span></div></div><h1 class="title is-3 is-size-4-mobile">React Native 0.66 Demo 搭建全过程（Android）</h1><div class="content"><h2 id="开发环境搭建（Android）"><a href="#开发环境搭建（Android）" class="headerlink" title="开发环境搭建（Android）"></a>开发环境搭建（Android）</h2><p>本文 Demo 是在 Windows 10 - 64位系统上搭建的。</p>
<p><a target="_blank" rel="noopener" href="https://reactnative.cn/docs/environment-setup">搭建开发环境 · React Native 中文网</a></p>
<p>参照上述博文，需要安装的软件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Node   			v12.22.0</span><br><span class="line">JDK     		jdk1.8.0_221</span><br><span class="line">Android Studio		v4.2.2</span><br></pre></td></tr></table></figure>

<h3 id="安装-Node"><a href="#安装-Node" class="headerlink" title="安装 Node"></a>安装 Node</h3><p>可参照下面的博文安装 <code>nvm</code>，通过 <code>nvm</code> 来安装 node 、管理 node 版本</p>
<p><a target="_blank" rel="noopener" href="https://admvli2016.github.io/2021/12/08/nvm-%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/#more">nvm 安装与使用 - Admvli2016’s Blog</a></p>
<span id="more"></span>

<p>1.1.1 安装 Yarn</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 安装 yarn</span></span><br><span class="line">npm install -g yarn </span><br></pre></td></tr></table></figure>



<h3 id="安装-JDK"><a href="#安装-JDK" class="headerlink" title="安装 JDK"></a>安装 <code>JDK</code></h3><p><code>JDK</code> 需要安装 <code>1.8.x</code> 版本的</p>
<p>（1）下载安装包（我的是 <code>jdk-8u221-windows-x64.exe</code>）</p>
<p>（2）安装过程不再赘述，更改文件安装目录  <code>D:\ShenGuYun\Java\jdk1.8.0_221\</code>，然后一步一步安装即可</p>
<p>（3）打开 <code>cmd</code> 查看 <code>JDK</code> 版本号，验证是否安装成功</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 查看 JDK 版本号</span></span><br><span class="line">java -version</span><br></pre></td></tr></table></figure>

<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_345529_Rh7jWrVBFHpl3C9C_1630234703%5B1%5D.png"></p>
<p>（4）<code>JDK</code> 环境变量配置</p>
<ul>
<li>添加系统变量 <code>JAVA_HOME</code></li>
</ul>
<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_282878_6TASNn0oOwuGSfzv_1630234777%5B1%5D.png"></p>
<ul>
<li>PATH变量添加下面一条记录: <code>%JAVA_HOME%\bin</code></li>
</ul>
<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_702431_W7TFWoJY5BlE_e7J_1630234796%5B1%5D.png"></p>
<ul>
<li>添加系统变量 <code>CLASSPATH</code>: <code>.;%JAVA_HOME%\lib;</code> （注：如存在这个环境变量，需要检查）</li>
</ul>
<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_379115_CvsTHfHlWBA6PdA3_1630234816%5B1%5D.png"></p>
<h3 id="安装-Android-Studio"><a href="#安装-Android-Studio" class="headerlink" title="安装 Android Studio"></a>安装 Android Studio</h3><p>（1）Android Studio 安装过程</p>
<p>安装界面勾选 Android Virtual Device</p>
<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_277098_DJEFqUBOB3A5F-I7_1633922191%5B1%5D.png"></p>
<p>然后一直 Next 即可</p>
<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_96772_KkSC55Fow4GGsrQL_1633922212%5B1%5D.png"></p>
<p>点击 Finish，会弹出下面的弹框，选择 Do not import settings</p>
<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_916043_lGTGr8tXtRfmYZiJ_1633922262%5B1%5D.png"></p>
<p>接下来可以看到欢迎界面</p>
<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_883769_NVw7zP5eMy9X6Uu3_1633922280%5B1%5D.png"></p>
<p>点击 Next，选择 Standard</p>
<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_86724_El_pnSTPm9rqXXwa_1633922298%5B1%5D.png"></p>
<p>接下来一直 Next 即可，Android Studio 会自动下载开发所需的组件（需要打开 <code>VPN</code>）</p>
<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_992911_UUVZgPV0a_TV7yZO_1633922326%5B1%5D.png"></p>
<p>下载完成，点击 Finish</p>
<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_35586_P1tbQjKrzx_AeWXs_1633922347%5B1%5D.png"></p>
<p>至此 Android Studio 安装完成</p>
<p>（2）下载 <code>Android SDK</code></p>
<p>Android Studio 安装完成后可以看见如下界面：</p>
<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_303555_1L8zvXlP9v2U1fYm_1633922432%5B1%5D.png"></p>
<p>打开 <code>SDK Manager</code></p>
<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_66463_-LCNucY5KKUa_y-Z_1633922452%5B1%5D.png"></p>
<p><code>SDK Manager</code> 还可以在 Android Studio 的 “Preferences” 菜单中找到。</p>
<p>具体路径是 <code>Appearance &amp; Behavior → System Settings → Android SDK</code>。</p>
<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_472594__hORnmIMDFX6YZAS_1633922594%5B1%5D.png"></p>
<p>确保勾选了下面这些组件</p>
<ul>
<li><code>Android SDK Platform 29</code></li>
<li><code>Intel x86 Atom_64 System Image</code></li>
</ul>
<p>然后点击 <code>SDK Tools</code> 选项卡</p>
<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_733902_O895YbwdkbImTtzv_1633922643%5B1%5D.png"></p>
<p>还是在 <code>SDK Tools</code> 选项卡</p>
<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_362628_m-EPGMTP33wQj6WU_1633922661%5B1%5D.png"></p>
<p>最后点击 “Apply” 来下载和安装这些组件<br>选择 Accept</p>
<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_356419_93jK7q4CT5gWDoKz_1633922689%5B1%5D.png"></p>
<p>点击 Next</p>
<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_819747_NK6l5Mu-Lo7ZwQZm_1633922713%5B1%5D.png"></p>
<p>（3）配置 ANDROID_HOME 环境变量</p>
<p>因为我之前搭建 <code>ionic5.x</code> Demo 时，已经配置过 ANDROID_HOME 环境变量，这里就不需要再进行处理了。</p>
<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_68143_MI2fTrLafrSam6Mr_1633922798%5B1%5D.png"></p>
<p>在 Android Studio 的 “Preferences” 菜单中查看 <code>SDK</code> 的真实路径，具体是 <code>Appearance &amp; Behavior → System Settings → Android SDK</code>。</p>
<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_228389_3iFrHBctCQ3CD76p_1633922818%5B1%5D.png"></p>
<p>查看到的 <code>SDK</code> 路径也是之前配置过的 <code>SDK</code> 路径</p>
<p><code>D:\ShenGuYun\Software\Android\android-sdk</code></p>
<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_654757_N6woAU3-AZc43EIl_1633922843%5B1%5D.png"></p>
<p>（4）将一些工具目录添加到环境变量 Path 中</p>
<p>如下所示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">%ANDROID_HOME%\platform-tools</span><br><span class="line">%ANDROID_HOME%\emulator</span><br><span class="line">%ANDROID_HOME%\tools</span><br><span class="line">%ANDROID_HOME%\tools\bin</span><br></pre></td></tr></table></figure>

<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_789500_IuLagJ_jcCznqjif_1633922952%5B1%5D.png"></p>
<p><strong>重启电脑</strong>使环境变量生效。</p>
<h2 id="创建-React-Native-项目"><a href="#创建-React-Native-项目" class="headerlink" title="创建 React Native 项目"></a>创建 React Native 项目</h2><blockquote>
<p>如果之前全局安装过旧的 <code>react-native-cli</code> 命令行工具，请使用 <code>npm uninstall -g react-native-cli</code> 卸载掉它以避免一些冲突。</p>
</blockquote>
<p>使用 React Native 内建的命令行工具来创建一个名为 “react-native-demo” 的新项目。这个命令行工具不需要安装，可以直接用 node 自带的 <code>npx</code> 命令来使用：</p>
<blockquote>
<p><strong>必须要看的注意事项一</strong>：请<code>不要</code>在目录、文件名中使用<code>中文、空格</code>等特殊符号。请<code>不要</code>单独使用常见的关键字作为项目名（如 class, native, new, package 等等）。请<code>不要</code>使用与核心模块同名的项目名（如 react, react-native 等）。</p>
<p><strong>必须要看的注意事项二</strong>：请<code>不要</code>在某些权限敏感的目录例如 <code>System32</code> 目录中 <code>init</code> 项目！会有各种权限限制导致不能运行！</p>
<p><strong>必须要看的注意事项三</strong>：请<code>不要</code>使用一些移植的终端环境，例如 <code>git bash</code> 或 <code>mingw</code> 等等，这些在 windows 下可能导致找不到环境变量。请使用系统自带的命令行（<code>CMD</code> 或 <code>powershell</code>）运行。</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 创建新项目</span></span><br><span class="line">npx react-native init react-native-demo</span><br><span class="line">npx react-native init my-react-native-demo</span><br><span class="line"><span class="meta">#</span><span class="bash"> 前面这两个创建报错</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 项目名称不合法 <span class="string">&#x27;xxx is not a valid name for a project&#x27;</span></span></span><br><span class="line">npx react-native init MyReactNativeDemo</span><br><span class="line"><span class="meta">#</span><span class="bash"> 使用 MyReactNativeDemo 就创建成功了（Pascal命名：大驼峰命名法）</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 未使用带 typescript 配置的，正式开发时需要使用 typescript</span></span><br></pre></td></tr></table></figure>

<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_440222_ezdFEgfPAPagvnVF_1633923177%5B1%5D.png"></p>
<p><strong>[可选参数] 指定版本或项目模板</strong></p>
<p>可以使用 <code>--version</code> 参数（注意是<code>两</code>个杠）创建指定版本的项目。注意版本号必须精确到两个小数点。(指定 React-Native 的版本)</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx react-native init MyReactNativeDemo --version X.XX.X</span><br></pre></td></tr></table></figure>

<p>还可以使用 <code>--template</code> 来使用一些社区提供的模板，例如带有 <code>TypeScript</code> 配置的：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx react-native init MyReactNativeDemo --template react-native-template-typescript</span><br></pre></td></tr></table></figure>



<h2 id="运行-React-Native-项目"><a href="#运行-React-Native-项目" class="headerlink" title="运行 React Native 项目"></a>运行 React Native 项目</h2><h3 id="准备-Android-设备-真机"><a href="#准备-Android-设备-真机" class="headerlink" title="准备 Android 设备 (真机)"></a>准备 Android 设备 (真机)</h3><p>以我的手机 <code>vivo x23</code> 为例</p>
<p>（1）打开 <code>USB</code> 调试</p>
<p><code>设置 &gt; 系统管理 &gt; 开发者选项 &gt; 打开开发者选项 &amp;&amp; USB 调试</code></p>
<p>（2）通过 <code>USB</code> 数据线连接设备</p>
<p>检查设备是否能够正确连接到 <code>ADB</code>（Android Debug Bridge），使用 <code>adb devices</code> 命令：</p>
<p>过程中手机会弹出如下提示：</p>
<p><code>允许 USB 调试吗？ </code> 点击确定即可。</p>
<img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_639304_q6IMEkH12ckfFAXZ_1633923757%5B1%5D.jpg" style="zoom:25%;" />

<p><code>adb devices</code> 运行结果如下所示：</p>
<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_992736_4M0vb_AE9s_I5HXg_1633923780%5B1%5D.png"></p>
<p>在右边那列看到 <strong>device</strong> 说明设备已经被正确连接了。注意，每次只应当连接一个设备。</p>
<blockquote>
<p>译注：如果你连接了多个设备（包含模拟器在内），后续的一些操作可能会失败。拔掉不需要的设备，或者关掉模拟器，确保 <code>adb devices</code> 的输出只有一个是连接状态。</p>
</blockquote>
<p>（3）运行项目</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 运行项目</span></span><br><span class="line">npx react-native run-android</span><br></pre></td></tr></table></figure>

<blockquote>
<p>提示：还可以运行 <code>npx react-native run-android --variant=release</code> 来安装 release 版的应用。当然需要先配置好签名，且此时无法再开启开发者菜单。注意在 debug 和 release 版本间来回切换安装时可能会报错签名不匹配，此时需要先卸载前一个版本再尝试安装。</p>
</blockquote>
<h3 id="准备-Android-设备（模拟器）"><a href="#准备-Android-设备（模拟器）" class="headerlink" title="准备 Android 设备（模拟器）"></a>准备 Android 设备（模拟器）</h3><p>（1）使用 Android Studio 打开 <code>MyReactNativeDemo</code> 项目下的 android 目录</p>
<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_771117_XG_v4kDCCoC9QHrU_1633930037%5B1%5D.gif"></p>
<p>注意使用 Android Studio 打开项目时，需要关闭 <code>VPN</code></p>
<p>出现报错：</p>
<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_792252_HXKw6Ja_nDutYjyp_1633930092%5B1%5D.png"></p>
<p><a target="_blank" rel="noopener" href="https://github.com/facebook/react-native/issues/31284">Cannot start react-native run-ios or run-android after initializing · Issue #31284 · facebook/react-native</a></p>
<p>参照上述博文，是因为 node 版本的问题</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 切换 node 版本到 v12.22.0</span></span><br><span class="line">nvm use 12.22.0</span><br></pre></td></tr></table></figure>

<p>关闭项目 Close Project，重新打开</p>
<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_25441_F3xsslM-_b_2EYN9_1633930182%5B1%5D.png"></p>
<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_721387_rghYsPLoJbr0z5rR_1633930196%5B1%5D.png"></p>
<p>解决问题！</p>
<p>（2）使用 <code>AVD Manager</code> 查看可用的虚拟设备，它的图标看起来像下面这样：</p>
<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_27737_OSYOi-wnzUAn1iwv_1633930248%5B1%5D.png"></p>
<p>点击 <code>AVD Manager</code></p>
<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_703180_WZJ_rDAz2w9p-Ioc_1633930271%5B1%5D.png"></p>
<p>（3）创建一个模拟设备</p>
<p>点击 “Create Virtual Device…”</p>
<p>然后选择所需的设备类型，点击 “Next”</p>
<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_371613_BirOivdgmzvUWvmG_1633930404%5B1%5D.png"></p>
<p>然后选择 Q (<code>API Level 29 image</code>)</p>
<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_602580_KdkxvfEp12_LcJzW_1633930448%5B1%5D.png"></p>
<p>点击 Download（此时需要打开 <code>VPN</code>）</p>
<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_322593_91B0oJVe_3Tr9PA5_1633930477%5B1%5D.png"></p>
<p>下载完成后点击 Finish</p>
<p>然后点击 “Next”</p>
<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_805035_kecamPqHqgwehTvO_1633930532%5B1%5D.png"></p>
<p>点击 “Finish”</p>
<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_928436_pd-H_o_XQqS31CRZ_1633930557%5B1%5D.png"></p>
<p>点击 ▸ 运行</p>
<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_670502_JqWbuxzGdqzpaVQU_1633930606%5B1%5D.png"></p>
<p>运行结果: </p>
<img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_241804_SXO9VYEqReVk4K9R_1633930646%5B1%5D.png" style="zoom: 67%;" />



<blockquote>
<p>译注：请不要轻易点击 Android Studio 中可能弹出的建议更新项目中某依赖项的建议，否则可能导致无法运行。</p>
</blockquote>
<h3 id="运行-React-Native-项目-使用真机"><a href="#运行-React-Native-项目-使用真机" class="headerlink" title="运行 React Native 项目 (使用真机)"></a>运行 React Native 项目 (使用真机)</h3><p>此时需要打开 <code>VPN</code></p>
<p>执行以下命令</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 打开项目文件夹</span></span><br><span class="line">cd MyReactNativeDemo</span><br><span class="line"><span class="meta">#</span><span class="bash"> 运行项目</span></span><br><span class="line">yarn android </span><br><span class="line"><span class="meta">#</span><span class="bash"> 或者 yarn react-native run-android</span> </span><br><span class="line"><span class="meta">#</span><span class="bash"> 或者 npx react-native run-android</span></span><br></pre></td></tr></table></figure>

<p>此命令会对项目的原生部分进行编译，同时在另外一个命令行中启动 <code>Metro</code> 服务对 <code> js</code> 代码进行实时打包处理（类似 <code>Webpack</code>）。<code>Metro</code> 服务也可以使用 <code>yarn start</code> 命令单独启动。</p>
<img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_75152_TFBkEpy6Dw6bAmYP_1633930855%5B1%5D.jpg" style="zoom: 25%;" />

<p>使用模拟器运行项目执行命令同上，不过需要先打开模拟器</p>
<p>模拟器运行结果如图所示：</p>
<img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_766254_Lv2vT6kZggCpHei4_1633931002%5B1%5D.png" style="zoom:67%;" />



<h3 id="修改项目中代码"><a href="#修改项目中代码" class="headerlink" title="修改项目中代码"></a>修改项目中代码</h3><p>（1）使用 VS Code 打开 <code>App.js</code> 文件并进行修改</p>
<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_634054_tzurNxZz-1a0PtVN_1633931293%5B1%5D.png"></p>
<p>（2）在 VS Code 中按 <code>Ctrl + S</code> 保存，就可以看到最新的修改</p>
<p>修改结果：</p>
<img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_174670_CONMH5Jc-ywwSjOZ_1633931326%5B1%5D.jpg" style="zoom:25%;" />



<h2 id="调试-React-Native-项目"><a href="#调试-React-Native-项目" class="headerlink" title="调试 React Native 项目"></a>调试 React Native 项目</h2><p>注意以下操作都是使用真机调试，若使用模拟器，步骤基本一致。</p>
<h3 id="开发菜单"><a href="#开发菜单" class="headerlink" title="开发菜单"></a>开发菜单</h3><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_427945_dscszb9WbxmgTYyg_1634265863%5B1%5D.jpg" style="zoom:25%;" />

<p>开发菜单包括：<code>Reload</code>、<code>Change Bundle Location</code>、<code>Show / Hide Element Inspector</code>、<code>Enable / Disable Fast Refresh</code>、<code>Show / Hide Perf Monitor</code>、<code>Settings</code>、<code>Enable / Disable Sampling Profiler</code>、<code>Debug </code> 等</p>
<p>（1）Reload -  重新加载 <code>App</code></p>
<p>（2）Change Bundle Location</p>
<p>更改 Bundle 的位置，可用于更改远程调试地址（<code>debugger-ui</code>）</p>
<img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_697542_F-gHDwv2aAub92F5_1634266287%5B1%5D.jpg" style="zoom:25%;" />

<p>（3）Show / Hide Element Inspector</p>
<ul>
<li><code>Inspect</code>（审查元素）</li>
</ul>
<img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_562762_f4ES8JQyxtfpGYno_1634266428%5B1%5D.jpg" style="zoom:25%;" />

<ul>
<li><code>Touchables</code>（查看可点击区域）</li>
</ul>
<img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_855203_uCnmY2dpQ263ZiRo_1634266452%5B1%5D.jpg" style="zoom:25%;" />

<ul>
<li><code>Perf</code>（性能分析工具，需要配合 Chrome 开发者工具的 Performance）</li>
<li><code>Network</code>（查看网络请求相关信息，需要配合 Chrome 开发者工具的 Network 使用）</li>
</ul>
<p>（4）Enable / Disable Fast Refresh - 启用 / 禁用热重载</p>
<p>（5）Show / Hide Perf Monitor</p>
<p>打开允许显示在其他应用的上层</p>
<img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_962893_85eHVKBd6zCKSgqa_1634266500%5B1%5D.jpg" style="zoom:25%;" />

<p>开启一个悬浮层，其中会显示应用的当前帧数</p>
<img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_247691_-blEoGK5QM7-JyNH_1634266525%5B1%5D.jpg" style="zoom:25%;" />

<p>（6）Settings</p>
<p>开发调试的一些设置</p>
<img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_784323_u7UEYJoVUBJEwwdq_1634266548%5B1%5D.jpg" style="zoom:25%;" />

<p>（7）Enable / Disable Sampling Profiler - 启用 / 禁用 取样分析器（貌似不能用）</p>
<p><code>JSIExecutor+JSCRuntimedoes not support Sampling Profiler</code></p>
<img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_612777_UeZYFNHTw1lBQJ3r_1634266896%5B1%5D.jpg" style="zoom:25%;" />

<p>（8）Debug - 打开 Debug 模式</p>
<h3 id="Chrome-开发者工具（debugger-ui）"><a href="#Chrome-开发者工具（debugger-ui）" class="headerlink" title="Chrome 开发者工具（debugger-ui）"></a>Chrome 开发者工具（<code>debugger-ui</code>）</h3><p>（1）<code>debugger-ui</code> 使用步骤</p>
<p><a target="_blank" rel="noopener" href="https://reactnative.cn/docs/debugging">调试 · React Native 中文网</a></p>
<p><a target="_blank" rel="noopener" href="https://juejin.cn/post/6844904015663218695">React Native开发和调试工具 - 掘金</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/gaosheng-221/p/6954434.html">React Native调试技巧与心得 - 黑乌鸦 - 博客园</a></p>
<p>参照上述博文</p>
<p>完整步骤：</p>
<ul>
<li><p>将设备通过 <code>USB</code> 数据线连接到电脑上，并开启 <code>USB</code> 调试（关于如何开启 <code>USB</code> 调试，参见上面的章节）。</p>
</li>
<li><p>在 VS Code 中运行项目 <code>yarn android</code> </p>
</li>
<li><p>另外打开一个 <code>cmd</code> 窗口，运行 <code>adb reverse tcp:8081 tcp:8081</code></p>
</li>
<li><p>在弹出 Packager（metro）命令窗口中敲击 d，唤出开发菜单，再点击 Debug</p>
</li>
</ul>
<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_904911_NGh3e3Q-W_mjrA-m_1634268975%5B1%5D.png"></p>
<p>如上图所示 <code>r</code> 重载 <code>app</code>，<code>d</code> 打开 <code>app</code> 开发菜单</p>
<p>此时可以在 Packager（metro）命令窗口中看到如下提示</p>
<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_170198_9Sfy3saq12PWdwwj_1634269013%5B1%5D.png"></p>
<p>且  <strong><code>app</code> 将会刷新一下页面</strong></p>
<p>点击打开 Debug 的同时将会自动打开调试页面 <a target="_blank" rel="noopener" href="http://localhost:8081/debugger-ui">http://localhost:8081/debugger-ui</a></p>
<p>如下图所示，说明 Debug 模式已开启！</p>
<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_925910_1h7OqL6DA6jQn7_r_1634269163%5B1%5D.png"></p>
<p>在 Chrome 中按 <code>F12</code> 打开开发者工具，就可以在 Chrome 中调试 JavaScript 代码了。</p>
<p>在 Console 中可以看到 RN 项目中打印的信息</p>
<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_266337_g8J5b8NJAZu2ol8W_1634269217%5B1%5D.png"></p>
<blockquote>
<p>注意：Chrome 中并不能直接看到 <code>App</code> 的用户界面，而只能提供 console 的输出，以及在 sources 项中断点调试 <code>js</code> 脚本。一些老的教程和文章会提到 React 的 Chrome 插件，这一插件目前并不支持 React Native，而且调试本身并不需要这个插件。不过可以安装独立（非插件）版本的 React Developer Tools 来辅助查看界面布局，下文会讲述具体安装方法</p>
</blockquote>
<blockquote>
<p>注意：使用 Chrome 调试目前无法观测到 React Native 中的网络请求，你可以使用功能更强大的第三方的 react-native-debugger 或是官方的 flipper（注意仅能在 0.62 以上版本可用）来观测。</p>
</blockquote>
<ul>
<li>在 Source 中调试 <code>js</code> - 全局断点</li>
</ul>
<p><strong>Pause On Caught Exceptions</strong></p>
<p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/2233339/javascript-is-there-a-way-to-get-chrome-to-break-on-all-errors/17324511#17324511">JavaScript: Is there a way to get Chrome to break on all errors? - Stack Overflow</a></p>
<p>（2）Trouble Shooting</p>
<p>问题1：点击打开 Debug，<code>App</code> 报错：Failed to connect to debugger! Timeout while connecting to remote debugger</p>
<img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_693616_7d7KCrS7ZPTYC4bw_1634275330%5B1%5D.jpg" style="zoom:25%;" />

<p>原因是 8081 端口被占用了，导致连接不上。</p>
<p>解决方法：</p>
<p><a target="_blank" rel="noopener" href="https://www.zhangshengrong.com/p/9Oab7l5ONd/">解决React Native端口号修改的方法 / 张生荣</a></p>
<p>参照上述博文，尝试修改 RN 本地运行的端口号</p>
<p>第一种方法不可行，运行如下命令将会自动打开一个 Packager 窗口</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 将 apk 部署到手机上</span></span><br><span class="line">npx react-native run-android</span><br></pre></td></tr></table></figure>

<p>使用 <code>npx react-native start --port 9999</code> 打开的 Packager 窗口和部署在手机上的 <code>App</code> 没有关联，所以不可行 </p>
<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_285296_y4aOvaNxMT0P-KQg_1634275887%5B1%5D.png"></p>
<p><strong>摸索出来的正确修改 RN 本地运行端口号的办法</strong></p>
<ul>
<li>使用 <code>yarn android --port 9999</code> 运行项目，将 <code>apk</code> 部署到手机上</li>
<li>在自动打开的 Packager 命令窗口中，按 d 唤出开发菜单</li>
<li>选择 Change Bundle Location ，打开弹窗，输入 <code>localhost:9999</code>，点击确定</li>
<li>重新唤出开发菜单，选择 Debug，开启 Debug 模式，此时自动打开的调试页面地址为 <a target="_blank" rel="noopener" href="http://localhost:9999/debugger-ui">http://localhost:9999/debugger-ui</a></li>
</ul>
<p>开了两个前端服务（占用 8080、8081）验证一下上述方法是否管用</p>
<p>在 <code>9998</code> 端口上验证了一下，上述方法确实<strong>是可行的。</strong></p>
<p>观察到一个现象：</p>
<p>发现启用一个前端服务（占用 8081）之后，使用 yarn android 运行项目，打不开 Packager 页面，并且安装到手机上的 <code>app</code>，打开后直接报错：</p>
<img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_205196_3DiAI_-7-8CVHMhH_1634276274%5B1%5D.jpg" style="zoom:25%;" />

<p>说明运行 <code>yarn android</code> 默认占用的是 8081 端口</p>
<hr/>

<p>问题2：<code>debugger-ui</code> 页面显示 Status: Another debugger is already connected</p>
<p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/61449875/react-native-localhost-another-debugger-is-already-connected">reactjs - React Native localhost Another debugger is already connected - Stack Overflow</a></p>
<p>参照上述博文，原因是 Chrome 有两个标签页同时访问了 <a target="_blank" rel="noopener" href="http://localhost:8081/debugger-ui/">http://localhost:8081/debugger-ui/</a>  </p>
<p>或者 IE、Edge 和 Chrome 浏览器同时访问了 <a target="_blank" rel="noopener" href="http://localhost:8081/debugger-ui/">http://localhost:8081/debugger-ui/</a></p>
<hr/>

<p>问题3：<code>Packager</code> 命令窗口报错：<code>Error: Unable to resolve module ./debugger-ui/ui.e31bb0bc.js</code></p>
<img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_796422_b8k81z41OxZCQBX2_1634277059%5B1%5D.png" style="zoom:50%;" />

<p><code>App</code> 上同时警告： Remote debugger is in a background… </p>
<p>完整内容：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Console Warning</span><br><span class="line">Remote debugger is in a background tab which may cause apps to perform slowly. Fix this by foregrounding this tab (or opening it in a separate window).</span><br></pre></td></tr></table></figure>

<p>控制台警告：远程调试器位于后台选项卡中，这可能会导致应用程序执行缓慢。通过激活该选项卡（或在单独的窗口中打开）修复此问题。</p>
<p>该报错不会影响 Debug 调试功能正常使用，可不作理会。</p>
<hr/>

<p>问题4：点击打开 Debug，<code>App</code> 报错：<code>Attempt to invoke interface method &#39;java.lang.String.com.facebook.react.bridge.CatalystInstance.getSourceURL()&#39; on a null object reference</code></p>
<img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_645950_Cv59qVYquBW35Tmb_1634277478%5B1%5D.jpg" style="zoom:25%;" />

<p>在开发菜单 Settings 页面设置 Debugging &gt; Debug server host &amp; port for device；然后再点击打开 Debug 会报这个错误，注意一下即可。</p>
<h3 id="react-devtools"><a href="#react-devtools" class="headerlink" title="react-devtools"></a><code>react-devtools</code></h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 全局安装</span> </span><br><span class="line">npm install -g react-devtools</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://github.com/facebook/react/tree/main/packages/react-devtools">react/packages/react-devtools at main · facebook/react</a></p>
<p>参照上述博文</p>
<p>完整步骤：</p>
<ul>
<li>将设备通过 <code>USB</code> 数据线连接到电脑上，并开启 <code>USB</code> 调试</li>
<li>在 VS Code 中运行项目 <code>yarn android</code> </li>
<li>启动 <code>react-devtools</code>：打开一个 <code>cmd</code> 窗口，运行命令 <code>react-devtools</code> </li>
<li>运行在真机上时，需要继续执行以下命令</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb reverse tcp:8097 tcp:8097</span><br></pre></td></tr></table></figure>

<ul>
<li><p>在弹出 Packager（metro）命令窗口中敲击 d，唤出开发菜单，再点击 Show Element Inspector 即可。</p>
<p>在 <code>react-devtools</code> 当中选中一个元素（类似于 Chrome 开发者工具中 Elements 的作用）</p>
</li>
</ul>
<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_685314_lBzQ1Q3GmOrgI8o__1634267469%5B1%5D.png"></p>
<p>手机端同时选中了相同的元素。</p>
<img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_379580_h0khrK7zbr-zVeBp_1634267505%5B1%5D.jpg" style="zoom:25%;" />



<h3 id="React-Native-Debugger"><a href="#React-Native-Debugger" class="headerlink" title="React Native Debugger"></a>React Native Debugger</h3><p>（1）安装 React Native Debugger</p>
<p><code>GitHub</code>： <a target="_blank" rel="noopener" href="https://github.com/jhen0409/react-native-debugger">jhen0409/react-native-debugger: The standalone app based on official debugger of React Native, and includes React Inspector / Redux DevTools</a></p>
<p>下载页：<a target="_blank" rel="noopener" href="https://github.com/jhen0409/react-native-debugger/releases">Releases · jhen0409/react-native-debugger</a></p>
<p>下载安装包，选择合适位置解压即可。</p>
<p>（2）React Native Debugger 调试注意事项</p>
<p><a target="_blank" rel="noopener" href="https://github.com/jhen0409/react-native-debugger/blob/master/docs/getting-started.md">react-native-debugger/getting-started.md at master · jhen0409/react-native-debugger</a></p>
<p>参照上述博文，调试时有以下几点需要注意：</p>
<ul>
<li><p>确保所有 React Native 的调试客户端都已经关闭，如 <code>debugger-ui</code></p>
</li>
<li><p>确保 React Native Debugger 已打开且处于等待状态</p>
</li>
<li><p>React Native Debugger 将尝试连接调试器代理，默认使用 <code>8081</code> 端口，如果需要，可以创建一个指定端口的新的调试器窗口（<code>macOS: comand+ T</code>，<code>Linux/Windows: Ctrl+T</code>）</p>
</li>
<li><p>打开开发菜单，点击 Debug，将会自动启用 React Native Debugger</p>
</li>
</ul>
<p>（3）React Native Debugger 使用步骤总结</p>
<p><a target="_blank" rel="noopener" href="https://blog.51cto.com/u_15127643/2770943">RN调试利器——React Native Debugger【图文】_mob604756fdc4e1_51CTO博客</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/hzxOnlineOk/article/details/102842365">(11条消息) 如何使用React Native Debugger来调试 而不使用RN默认的debugger-ui_hzxOnlineOk的博客-CSDN博客_debugger-ui</a></p>
<p><a target="_blank" rel="noopener" href="https://fish.iwhalecloud.com/fish-mobile-x/blog/2020/06/10/react-native-debugger.html">react-native-debugger 调试工具简单使用 · Fish Mobile X</a></p>
<p>参照上述博文</p>
<p>完整步骤：</p>
<ul>
<li><p>将设备通过 <code>USB</code> 数据线连接到电脑上，并开启 <code>USB</code> 调试</p>
</li>
<li><p>在 VS Code 中运行项目 <code>yarn android</code> </p>
</li>
<li><p>打开下载好的 React Native Debugger，确保所有 React Native 的调试客户端都已经关闭，如 <code>debugger-ui</code></p>
</li>
<li><p>在弹出 Packager（metro）命令窗口中敲击 d，唤出开发菜单，再点击 Debug 即可。</p>
</li>
</ul>
<p>此时可以在 Packager（metro）命令窗口中看到如下提示</p>
<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_470545_mPOh6Pc5eaBKESHG_1634268402%5B1%5D.png"></p>
<p>且 <strong><code>app</code> 刷新了一下页面</strong>，说明 Debug 模式已开启！</p>
<p>在 React Native Debugger 界面中可以看到上来的内容：</p>
<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_866733_Moa7gWr6iVkheGQV_1634268438%5B1%5D.png"></p>
<p>（4）Trouble Shooting</p>
<p>问题：<code>React Native Debugger v0.12.1</code> 看不到 React Native Style Editor 部分</p>
<p><a target="_blank" rel="noopener" href="https://github.com/jhen0409/react-native-debugger/blob/master/docs/react-devtools-integration.md">react-native-debugger/react-devtools-integration.md at master · jhen0409/react-native-debugger</a></p>
<p><a target="_blank" rel="noopener" href="https://classic.yarnpkg.com/en/docs/selective-version-resolutions/">Selective dependency resolutions  Yarn</a></p>
<p><a target="_blank" rel="noopener" href="https://gist.github.com/bvaughn/4bc90775530873fdf8e7ade4a039e579">React DevTools: Unsupported backend version</a></p>
<p>参见上述博文，以为是 <code>react-devtools-core</code> 版本的问题</p>
<p>在自己的项目 <code>package.json</code> 里面加了下面一句</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;resolutions&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;react-devtools-core&quot;</span>: <span class="string">&quot;~4.13.5&quot;</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>然后运行了一下 <code>yarn install</code>  ，没有任何作用，<code>react-devtools-core</code> 也删不掉了。</p>
<p>其实上面的博文和自己遇见的问题根本不一样，自己没有仔细看。</p>
<p>找到另外一篇博文</p>
<p><a target="_blank" rel="noopener" href="https://github.com/jhen0409/react-native-debugger/issues/569">cant see Native Style Editor · Issue #569 · jhen0409/react-native-debugger</a></p>
<p>参见上述博文，真正的原因是 <code>react-devtools</code> 版本的问题，最新版本的 <code>react-devtools</code> 不提供 React Native Style Editor 功能</p>
<p>这部分平常不怎么用到，对开发没有太大影响，也可以使用内置工具 Show Element Inspector 来替代</p>
<h2 id="React-Native-项目打包"><a href="#React-Native-项目打包" class="headerlink" title="React Native 项目打包"></a>React Native 项目打包</h2><p><a target="_blank" rel="noopener" href="https://reactnative.cn/docs/signed-apk-android">打包发布 · React Native 中文网</a></p>
<p><a target="_blank" rel="noopener" href="https://developer.android.com/studio/publish/app-signing">为应用签名   Android 开发者   Android Developers</a></p>
<p>参照上述博文，首先需要配置好应用签名。</p>
<h3 id="生成一个签名密钥"><a href="#生成一个签名密钥" class="headerlink" title="生成一个签名密钥"></a>生成一个签名密钥</h3><p>可以用 <code>keytool</code> 命令生成一个私有密钥。在 Windows 上 <code>keytool</code> 命令放在 <code>JDK</code> 的 bin 目录中（我的是 <code>D:\ShenGuYun\Software\Java\jdk1.8.0_221\bin</code>），需要在命令行中先进入此目录才能执行下列命令。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">keytool -genkeypair -v -storetype PKCS12 -keystore my-release-key.keystore -alias com.xxxxxxx.xxxxxx -keyalg RSA -keysize 2048 -validity 1000</span><br></pre></td></tr></table></figure>

<p>这条命令会要求你输入密钥库（<code>keystore</code>）和对应密钥的密码</p>
<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_995630_bES5y_eS747vJYe6_1633932021%5B1%5D.png"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 密钥库（keystore）密码</span><br><span class="line">xx123456</span><br><span class="line"># 对应密钥的密码</span><br><span class="line">xx123456</span><br></pre></td></tr></table></figure>

<p>然后设置一些发行相关的信息</p>
<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_354722_KOFaSQtcq3S7x8Tk_1633932066%5B1%5D.png"></p>
<p>最后它会生成一个叫做 <code>my-release-key.keystore</code> 的密钥库文件。</p>
<p>生成的文件路径：</p>
<p><code>D:\ShenGuYun\Software\Java\jdk1.8.0_221\bin\my-release-key.keystore</code></p>
<p>在运行上面这条语句之后，密钥库里应该已经生成了一个单独的密钥，有效期为 10000 天。</p>
<p><code>--alias</code> 参数后面的别名是将来为应用签名时所需要用到的，所以记得记录一下这个别名。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// 别名</span><br><span class="line">com.xxxxxxx.xxxxxx</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意：请记得妥善地保管好密钥库文件，一般不要上传到版本库或者其它的地方。</p>
</blockquote>
<h3 id="设置-gradle-变量"><a href="#设置-gradle-变量" class="headerlink" title="设置  gradle  变量"></a>设置  <code>gradle</code>  变量</h3><p>（1）把 <code>my-release-key.keystore</code> 文件放到工程中的 <code>android/app</code>  文件夹下。</p>
<p>（2）编辑 <code>~/.gradle/gradle.properties</code>（全局配置，对所有项目有效）或是 <code>项目目录/android/gradle.properties</code>（项目配置，只对所在项目有效）。如果没有 <code>gradle.properties</code> 文件就自己创建一个，添加如下的代码（注意把其中的 <code>****</code> 替换为相应密码）</p>
<blockquote>
<p>注意：~ 符号表示用户目录，比如 windows 上可能是 <code>C:\Users\用户名</code>，而 mac 上可能是 <code>/Users/用户名</code>。</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># Signature application</span><br><span class="line">MYAPP_RELEASE_STORE_FILE=my-release-key.keystore</span><br><span class="line">MYAPP_RELEASE_KEY_ALIAS=com.xxxxxxx.xxxxxx</span><br><span class="line">MYAPP_RELEASE_STORE_PASSWORD=xx123456</span><br><span class="line">MYAPP_RELEASE_KEY_PASSWORD=xx123456</span><br></pre></td></tr></table></figure>

<p>上面的这些会作为 <code>gradle</code> 的变量，在后面的步骤中可以用来给应用签名。</p>
<h3 id="将签名配置添加到项目的-gradle-配置中"><a href="#将签名配置添加到项目的-gradle-配置中" class="headerlink" title="将签名配置添加到项目的 gradle 配置中"></a>将签名配置添加到项目的 <code>gradle</code> 配置中</h3><p>编辑项目目录下的 <code>android/app/build.gradle</code> 文件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// android/app/build.gradle</span></span><br><span class="line"></span><br><span class="line">android &#123;</span><br><span class="line">    ...</span><br><span class="line">    defaultConfig &#123;</span><br><span class="line">        ...</span><br><span class="line">        <span class="comment">// applicationId &quot;com.myreactnativedemo&quot;</span></span><br><span class="line">        applicationId <span class="string">&quot;com.xxxxxxx.xxxxxx&quot;</span>  </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    signingConfigs &#123;</span><br><span class="line">         ...</span><br><span class="line">        release &#123;</span><br><span class="line">            <span class="keyword">if</span> (project.hasProperty(<span class="string">&#x27;MYAPP_RELEASE_STORE_FILE&#x27;</span>)) &#123;</span><br><span class="line">                storeFile file(MYAPP_RELEASE_STORE_FILE)</span><br><span class="line">                storePassword MYAPP_RELEASE_STORE_PASSWORD</span><br><span class="line">                keyAlias MYAPP_RELEASE_KEY_ALIAS</span><br><span class="line">                keyPassword MYAPP_RELEASE_KEY_PASSWORD</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    buildTypes &#123;</span><br><span class="line">        release &#123;</span><br><span class="line">            ...</span><br><span class="line">            <span class="comment">// signingConfig signingConfigs.debug</span></span><br><span class="line">            signingConfig signingConfigs.release</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="修改应用名称以及应用图标"><a href="#修改应用名称以及应用图标" class="headerlink" title="修改应用名称以及应用图标"></a>修改应用名称以及应用图标</h3><p><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000038920697">我算是从安装到打包完成了一个 React Native 项目 - SegmentFault 思否</a></p>
<p>参照上述博文</p>
<p>（1）修改应用名称</p>
<p>文件路径：<code>/android/app/src/main/res/values/strings.xml </code></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span> <span class="attr">name</span>=<span class="string">&quot;app_name&quot;</span>&gt;</span>因思云<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>（2）修改应用图标</p>
<p>将下列文件夹下的图标替换成需要的 Icon 即可。</p>
<p>文件夹路径：<code>/android/app/src/main/res/</code></p>
<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/image-20211224181307772.png" alt="image-20211224181307772"></p>
<h3 id="生成发行-APK-包"><a href="#生成发行-APK-包" class="headerlink" title="生成发行 APK 包"></a>生成发行 <code>APK</code> 包</h3><p>只需在终端中执行以下命令：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd android</span><br><span class="line">./gradlew assembleRelease</span><br></pre></td></tr></table></figure>

<blockquote>
<p>译注：<code>cd android</code> 表示进入 android 目录（如果已经在 android 目录中了那就不用输入了）。<code>./gradlew assembleRelease</code> 在 <code>macOS</code>、<code>Linux</code> 或是 <code>windows</code> 的 <code>PowerShel</code>l 环境中表示执行当前目录下的名为 <code>gradlew</code> 的脚本文件，且其运行参数为 <code>assembleRelease</code>，注意这个 <code>./</code> 不可省略；而在 <code>windows</code> 的传统 <code>CMD</code> 命令行下则需要去掉 <code>./</code>。</p>
</blockquote>
<p><code>Gradle</code> 的 <code>assembleRelease</code> 参数会把所有用到的 JavaScript 代码都打包到一起，然后内置到 <code>APK</code> 包中。如果想调整下这个行为（比如 <code>js</code> 代码以及静态资源打包的默认文件名或是目录结构等），可以看看 <code>android/app/build.gradle</code> 文件，然后琢磨下应该怎么修改以满足需求。</p>
<blockquote>
<p>注意：请确保 <code>gradle.properties</code> 中 <code>没有</code> 包含 <code>_org.gradle.configureondemand=true_</code> ，否则会跳过 <code>js</code> 打包的步骤，导致最终生成的是一个无法运行的空壳。</p>
</blockquote>
<p>生成的 <code>APK</code> 文件位于 <code>android/app/build/outputs/apk/release/app-release.apk</code> ，它已经可以用来发布了。</p>
<p>运行 <code>gradlew assembleRelease</code> 报错：</p>
<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_148146_uvpXNleOFDACgNKf_1633932439%5B1%5D.png"></p>
<p>猜测是因为 node 版本问题，切换至 <code>node v12.22.0</code></p>
<p>再次尝试运行 <code>gradlew assembleRelease</code>，注意此时需要打开 <code>VPN</code></p>
<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_226936_UOa2BZMbYDyRzLRC_1633932466%5B1%5D.png"></p>
<p><strong>打包成功！</strong>确实是 node 版本问题</p>
<p>生成的 <code>apk</code> 文件如下图所示：</p>
<p>文件路径：<code>xxx\MyReactNativeDemo\android\app\build\outputs\apk\release\app-release.apk</code></p>
<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_434709_9zsXGWL2TrZFqTWA_1633932526%5B1%5D.png"></p>
<h3 id="将-APK-安装到手机上"><a href="#将-APK-安装到手机上" class="headerlink" title="将 APK 安装到手机上"></a>将 <code>APK</code> 安装到手机上</h3><p>（1）直接安装 <code>APK</code>，可以正常使用</p>
<img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_117047_8G-IE2VzFhvJILsH_1633932677%5B1%5D.jpg" style="zoom:25%;" />

<p>（2）命令形式安装</p>
<p>输入以下命令可以在设备上安装发行版本 <code>APK</code>：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 打开项目文件夹</span></span><br><span class="line">cd MyReactNativeDemo</span><br><span class="line"><span class="meta">#</span><span class="bash"> 安装发行版本 APK</span></span><br><span class="line">npx react-native run-android --variant=release</span><br></pre></td></tr></table></figure>

<blockquote>
<p> 注意 <code>--variant=release</code> 参数只能在完成了上面的签名配置之后才可以使用。</p>
</blockquote>
<blockquote>
<p>注意：在 debug 和 release 版本间来回切换安装时可能会报错签名不匹配，此时需要先卸载前一个版本再尝试安装。</p>
</blockquote>
<p>安装到手机上成功。</p>
<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_191471_wqrXEDFBaFJkO53z_1633932778%5B1%5D.png"></p>
<img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_682730_lSo0SsFDpnbwU_SR_1633932792%5B1%5D.jpg" style="zoom:25%;" />

<p>可以看到运行有报错：</p>
<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_483791_XjS-dkrztHCIVLgg_1633932815%5B1%5D.png"></p>
<p>应该是之前更改了 <code>applicationId</code> 的问题，改回来</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// android/app/build.gradle</span><br><span class="line">android &#123;</span><br><span class="line">    ...</span><br><span class="line">    defaultConfig &#123;</span><br><span class="line">        ...</span><br><span class="line">        applicationId &quot;com.myreactnativedemo&quot;</span><br><span class="line">        // applicationId &quot;com.xxxxxxx.xxxxxx&quot;  </span><br><span class="line">    &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p>再次执行</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 安装发行版本 APK</span></span><br><span class="line">npx react-native run-android --variant=release</span><br></pre></td></tr></table></figure>

<p>没有报错了！</p>
<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/MTY4ODg1MDk0ODIwNzAwOA_499164_EOonuITRSvOTbGZN_1633932907%5B1%5D.png"></p>
<h3 id="针对不同的-CPU-架构生成-APK-以减小-APK-文件的大小"><a href="#针对不同的-CPU-架构生成-APK-以减小-APK-文件的大小" class="headerlink" title="针对不同的 CPU 架构生成 APK 以减小 APK 文件的大小"></a>针对不同的 CPU 架构生成 <code>APK</code> 以减小 <code>APK</code> 文件的大小</h3><p>默认情况下，生成的 <code>APK</code> 会同时包含针对于多种 CPU 架构的原生代码。这样可以让我们更方便的向其他人分享这个 <code>APK</code>，因为它几乎可以运行在所有的 Android 设备上。但是，这会导致所有设备上都有一些根本不会运行的代码，白白占据了空间。目前安卓设备绝大多数是 ARM 架构，因此对于大部分应用来说可以考虑去掉 <code>x86</code> 架构的支持（但是请注意模拟器大部分是 <code>x86</code> 架构，因此去掉 <code>x86</code> 架构后将无法在模拟器上运行）。</p>
<p>可以在 <code>android/app/build.gradle</code> 中修改如下代码（false 改为 true）来生成多个针对不同 CPU 架构的 <code>APK</code>。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// android/app/build.gradle</span></span><br><span class="line">splits &#123;</span><br><span class="line">        abi &#123;</span><br><span class="line">            reset()</span><br><span class="line">            enable enableSeparateBuildPerCPUArchitecture</span><br><span class="line">            universalApk <span class="literal">false</span>  <span class="comment">// If true, also generate a universal APK</span></span><br><span class="line">            include <span class="string">&quot;armeabi-v7a&quot;</span>, <span class="string">&quot;x86&quot;</span>, <span class="string">&quot;arm64-v8a&quot;</span>, <span class="string">&quot;x86_64&quot;</span>  <span class="comment">// 注意这里</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// android/app/build.gradle</span></span><br><span class="line"><span class="comment">// def enableSeparateBuildPerCPUArchitecture = false</span></span><br><span class="line">def enableSeparateBuildPerCPUArchitecture = <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<p>可以把这上面打包生成的多个 <code>APK</code> 都上传到支持对用户设备 CPU 架构定位的应用程序商店，例如 <code>Google Play</code> 和 <code>Amazon AppStore</code>，用户将自动获得相应的 <code>APK</code>。如果您想上传到其他市场，例如 <code>APKFiles</code>（不支持一个应用有多个 <code>APK</code> 文件），可以修改下面的代码，来额外生成一个适用不同 CPU 架构的通用 <code>APK</code>。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// android/app/build.gradle</span></span><br><span class="line">splits &#123;</span><br><span class="line">        abi &#123;</span><br><span class="line">            reset()</span><br><span class="line">            enable enableSeparateBuildPerCPUArchitecture</span><br><span class="line">            <span class="comment">// universalApk false  </span></span><br><span class="line">            universalApk <span class="literal">true</span> <span class="comment">// 额外生成一个适用不同CPU架构的通用APK</span></span><br><span class="line">            include <span class="string">&quot;armeabi-v7a&quot;</span>, <span class="string">&quot;x86&quot;</span>, <span class="string">&quot;arm64-v8a&quot;</span>, <span class="string">&quot;x86_64&quot;</span>  </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>



<h3 id="启用-Proguard-来减少-APK-的大小（可选）"><a href="#启用-Proguard-来减少-APK-的大小（可选）" class="headerlink" title="启用 Proguard 来减少 APK 的大小（可选）"></a>启用 <code>Proguard</code> 来减少 <code>APK</code> 的大小（可选）</h3><p><code>Proguard</code> 是一个 Java 字节码混淆压缩工具，它可以移除掉 React Native Java（和它的依赖库中）中没有被使用到的部分，最终有效的减少 <code>APK</code> 的大小。</p>
<p>重要：启用 <code>Proguard</code> 之后，必须再次全面地测试你的应用。<code>Proguard</code> 有时候需要为你引入的每个原生库做一些额外的配置。参见 <code>app/proguard-rules.pro</code> 文件。</p>
<p>要启用 <code>Proguard</code>，修改 <code>android/app/build.gradle</code> 文件如下内容：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// android/app/build.gradle</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Run Proguard to shrink the Java bytecode in release builds.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">// def enableProguardInReleaseBuilds = false</span></span><br><span class="line">def enableProguardInReleaseBuilds = <span class="literal">true</span></span><br></pre></td></tr></table></figure></div><hr style="height:1px;margin:1rem 0"><div class="level is-mobile is-flex"><div class="article-tags is-size-7 is-uppercase"><i class="fas fa-tags has-text-grey"></i> <a class="link-muted" rel="tag" href="/tags/Android/">Android, </a><a class="link-muted" rel="tag" href="/tags/React-Native/">React Native </a></div></div><!--!--></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2021/12/24/React-Native-0-66-Demo-%E9%9B%86%E6%88%90-Code-Push%EF%BC%88Android%EF%BC%89/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">React Native 0.66 Demo 集成 Code Push（Android）</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2021/12/24/React-Navigation-6-x-%E6%96%87%E6%A1%A3%E7%AE%80%E8%BF%B0/"><span class="level-item">React Navigation 6.x 文档简述</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><!--!--></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/微信图片_20211205223721.jpg" alt="admvli2016"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">admvli2016</p><p class="is-size-6 is-block">Front-end Developer</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>ShenZhen, China</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">17</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">6</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">25</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/admvli2016" target="_blank" rel="noopener">关注我</a></div></div></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-02-28T10:08:46.000Z">2022-02-28</time></p><p class="title"><a href="/2022/02/28/React-Native-0-66-Demo-%E5%89%8D%E7%AB%AF%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83%E5%AE%9E%E8%B7%B5/">React Native 0.66 Demo 前端代码规范实践</a></p><p class="categories"><a href="/categories/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/">前端工程化</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-12-26T17:06:59.000Z">2021-12-27</time></p><p class="title"><a href="/2021/12/27/React-Native-0-66-Demo-%E9%9B%86%E6%88%90%E6%9E%81%E5%85%89%E6%8E%A8%E9%80%81%EF%BC%88iOS%EF%BC%89/">React Native 0.66 Demo 集成极光推送（iOS）</a></p><p class="categories"><a href="/categories/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E5%BC%80%E5%8F%91/">移动端开发</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-12-26T14:23:23.000Z">2021-12-26</time></p><p class="title"><a href="/2021/12/26/React-Native-0-66-Demo-%E9%9B%86%E6%88%90-Code-Push%EF%BC%88iOS%EF%BC%89/">React Native 0.66 Demo 集成 Code Push（iOS）</a></p><p class="categories"><a href="/categories/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E5%BC%80%E5%8F%91/">移动端开发</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-12-25T09:21:21.000Z">2021-12-25</time></p><p class="title"><a href="/2021/12/25/React-Native-0-66-Demo-%E6%90%AD%E5%BB%BA%E5%85%A8%E8%BF%87%E7%A8%8B%EF%BC%88iOS%EF%BC%89/">React Native 0.66 Demo 搭建全过程（iOS）</a></p><p class="categories"><a href="/categories/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E5%BC%80%E5%8F%91/">移动端开发</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-12-25T03:27:14.000Z">2021-12-25</time></p><p class="title"><a href="/2021/12/25/React-Native-0-66-Demo-%E9%9B%86%E6%88%90%E6%9E%81%E5%85%89%E6%8E%A8%E9%80%81%EF%BC%88Android%EF%BC%89/">React-Native 0.66 Demo 集成极光推送（Android）</a></p><p class="categories"><a href="/categories/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E5%BC%80%E5%8F%91/">移动端开发</a></p></div></article></div></div><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">目录</h3><ul class="menu-list"><li><a class="level is-mobile" href="#开发环境搭建（Android）"><span class="level-left"><span class="level-item">1</span><span class="level-item">开发环境搭建（Android）</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#安装-Node"><span class="level-left"><span class="level-item">1.1</span><span class="level-item">安装 Node</span></span></a></li><li><a class="level is-mobile" href="#安装-JDK"><span class="level-left"><span class="level-item">1.2</span><span class="level-item">安装 JDK</span></span></a></li><li><a class="level is-mobile" href="#安装-Android-Studio"><span class="level-left"><span class="level-item">1.3</span><span class="level-item">安装 Android Studio</span></span></a></li></ul></li><li><a class="level is-mobile" href="#创建-React-Native-项目"><span class="level-left"><span class="level-item">2</span><span class="level-item">创建 React Native 项目</span></span></a></li><li><a class="level is-mobile" href="#运行-React-Native-项目"><span class="level-left"><span class="level-item">3</span><span class="level-item">运行 React Native 项目</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#准备-Android-设备-真机"><span class="level-left"><span class="level-item">3.1</span><span class="level-item">准备 Android 设备 (真机)</span></span></a></li><li><a class="level is-mobile" href="#准备-Android-设备（模拟器）"><span class="level-left"><span class="level-item">3.2</span><span class="level-item">准备 Android 设备（模拟器）</span></span></a></li><li><a class="level is-mobile" href="#运行-React-Native-项目-使用真机"><span class="level-left"><span class="level-item">3.3</span><span class="level-item">运行 React Native 项目 (使用真机)</span></span></a></li><li><a class="level is-mobile" href="#修改项目中代码"><span class="level-left"><span class="level-item">3.4</span><span class="level-item">修改项目中代码</span></span></a></li></ul></li><li><a class="level is-mobile" href="#调试-React-Native-项目"><span class="level-left"><span class="level-item">4</span><span class="level-item">调试 React Native 项目</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#开发菜单"><span class="level-left"><span class="level-item">4.1</span><span class="level-item">开发菜单</span></span></a></li><li><a class="level is-mobile" href="#Chrome-开发者工具（debugger-ui）"><span class="level-left"><span class="level-item">4.2</span><span class="level-item">Chrome 开发者工具（debugger-ui）</span></span></a></li><li><a class="level is-mobile" href="#react-devtools"><span class="level-left"><span class="level-item">4.3</span><span class="level-item">react-devtools</span></span></a></li><li><a class="level is-mobile" href="#React-Native-Debugger"><span class="level-left"><span class="level-item">4.4</span><span class="level-item">React Native Debugger</span></span></a></li></ul></li><li><a class="level is-mobile" href="#React-Native-项目打包"><span class="level-left"><span class="level-item">5</span><span class="level-item">React Native 项目打包</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#生成一个签名密钥"><span class="level-left"><span class="level-item">5.1</span><span class="level-item">生成一个签名密钥</span></span></a></li><li><a class="level is-mobile" href="#设置-gradle-变量"><span class="level-left"><span class="level-item">5.2</span><span class="level-item">设置  gradle  变量</span></span></a></li><li><a class="level is-mobile" href="#将签名配置添加到项目的-gradle-配置中"><span class="level-left"><span class="level-item">5.3</span><span class="level-item">将签名配置添加到项目的 gradle 配置中</span></span></a></li><li><a class="level is-mobile" href="#修改应用名称以及应用图标"><span class="level-left"><span class="level-item">5.4</span><span class="level-item">修改应用名称以及应用图标</span></span></a></li><li><a class="level is-mobile" href="#生成发行-APK-包"><span class="level-left"><span class="level-item">5.5</span><span class="level-item">生成发行 APK 包</span></span></a></li><li><a class="level is-mobile" href="#将-APK-安装到手机上"><span class="level-left"><span class="level-item">5.6</span><span class="level-item">将 APK 安装到手机上</span></span></a></li><li><a class="level is-mobile" href="#针对不同的-CPU-架构生成-APK-以减小-APK-文件的大小"><span class="level-left"><span class="level-item">5.7</span><span class="level-item">针对不同的 CPU 架构生成 APK 以减小 APK 文件的大小</span></span></a></li><li><a class="level is-mobile" href="#启用-Proguard-来减少-APK-的大小（可选）"><span class="level-left"><span class="level-item">5.8</span><span class="level-item">启用 Proguard 来减少 APK 的大小（可选）</span></span></a></li></ul></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/">Admvli2016&#039;s Blog</a><p class="is-size-7"><span>&copy; 2024 admvli2016</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>