<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>React Native 0.66 Demo 前端代码规范实践 - Admvli2016&#039;s Blog</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Admvli2016&#039;s Blog"><meta name="msapplication-TileImage" content="/img/favicon-reset.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Admvli2016&#039;s Blog"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="前言：开发 React Native Demo 的过程中，自己对于 ESLint、Prettier、Husky、Lint-staged、Commitlint、Commitizen、Conventional-changelog 等前端代码规范化工具以及相关的 VS Code 插件的使用有了一定的实践经验，于是记录下来分享给有需要的人，同时也是为了方便自己以后进行查看。 ESLint - 代码检查工具"><meta property="og:type" content="blog"><meta property="og:title" content="React Native 0.66 Demo 前端代码规范实践"><meta property="og:url" content="http://example.com/2022/02/28/React-Native-0-66-Demo-%E5%89%8D%E7%AB%AF%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83%E5%AE%9E%E8%B7%B5/"><meta property="og:site_name" content="Admvli2016&#039;s Blog"><meta property="og:description" content="前言：开发 React Native Demo 的过程中，自己对于 ESLint、Prettier、Husky、Lint-staged、Commitlint、Commitizen、Conventional-changelog 等前端代码规范化工具以及相关的 VS Code 插件的使用有了一定的实践经验，于是记录下来分享给有需要的人，同时也是为了方便自己以后进行查看。 ESLint - 代码检查工具"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E6%88%AA%E5%9B%BE%20(15).png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E6%88%AA%E5%9B%BE%20(16).png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E6%88%AA%E5%9B%BE%20(17).png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E6%88%AA%E5%9B%BE%20(18).png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E6%88%AA%E5%9B%BE%20(19).png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E6%88%AA%E5%9B%BE%20(20).png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E6%88%AA%E5%9B%BE%20(21).png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E6%88%AA%E5%9B%BE%20(22).png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E6%88%AA%E5%9B%BE%20(23).png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E6%88%AA%E5%9B%BE%20(24).png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E6%88%AA%E5%9B%BE%20(25).png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E6%88%AA%E5%9B%BE%20(26).png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E4%BC%81%E4%B8%9A%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_16462023099692.png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E6%88%AA%E5%9B%BE%20(27).png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E6%88%AA%E5%9B%BE%20(28).png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E6%88%AA%E5%9B%BE%20(29).png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E6%88%AA%E5%9B%BE%20(30).png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E6%88%AA%E5%9B%BE%20(31).png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E6%88%AA%E5%9B%BE%20(32).png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E6%88%AA%E5%9B%BE%20(33).png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E6%88%AA%E5%9B%BE%20(34).png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E6%88%AA%E5%9B%BE%20(35).png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E6%88%AA%E5%9B%BE%20(36).png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E6%88%AA%E5%9B%BE%20(37).png"><meta property="og:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E6%88%AA%E5%9B%BE%20(38).png"><meta property="article:published_time" content="2022-02-28T10:08:46.000Z"><meta property="article:modified_time" content="2024-08-21T09:47:32.023Z"><meta property="article:author" content="admvli2016"><meta property="article:tag" content="React Native"><meta property="article:tag" content="Git"><meta property="article:tag" content="TypeScript"><meta property="article:tag" content="ESLint"><meta property="article:tag" content="Prettier"><meta property="article:tag" content="Husky"><meta property="article:tag" content="Lint-staged"><meta property="article:tag" content="Commitlint"><meta property="article:tag" content="Commitizen"><meta property="article:tag" content="Conventional-changelog"><meta property="article:tag" content="VS Code"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E6%88%AA%E5%9B%BE%20(15).png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://example.com/2022/02/28/React-Native-0-66-Demo-%E5%89%8D%E7%AB%AF%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83%E5%AE%9E%E8%B7%B5/"},"headline":"React Native 0.66 Demo 前端代码规范实践","image":["https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E6%88%AA%E5%9B%BE%20(15).png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E6%88%AA%E5%9B%BE%20(16).png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E6%88%AA%E5%9B%BE%20(17).png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E6%88%AA%E5%9B%BE%20(18).png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E6%88%AA%E5%9B%BE%20(19).png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E6%88%AA%E5%9B%BE%20(20).png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E6%88%AA%E5%9B%BE%20(21).png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E6%88%AA%E5%9B%BE%20(22).png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E6%88%AA%E5%9B%BE%20(23).png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E6%88%AA%E5%9B%BE%20(24).png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E6%88%AA%E5%9B%BE%20(25).png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E6%88%AA%E5%9B%BE%20(26).png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E4%BC%81%E4%B8%9A%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_16462023099692.png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E6%88%AA%E5%9B%BE%20(27).png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E6%88%AA%E5%9B%BE%20(28).png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E6%88%AA%E5%9B%BE%20(29).png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E6%88%AA%E5%9B%BE%20(30).png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E6%88%AA%E5%9B%BE%20(31).png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E6%88%AA%E5%9B%BE%20(32).png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E6%88%AA%E5%9B%BE%20(33).png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E6%88%AA%E5%9B%BE%20(34).png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E6%88%AA%E5%9B%BE%20(35).png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E6%88%AA%E5%9B%BE%20(36).png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E6%88%AA%E5%9B%BE%20(37).png","https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E6%88%AA%E5%9B%BE%20(38).png"],"datePublished":"2022-02-28T10:08:46.000Z","dateModified":"2024-08-21T09:47:32.023Z","author":{"@type":"Person","name":"admvli2016"},"publisher":{"@type":"Organization","name":"Admvli2016's Blog","logo":{"@type":"ImageObject","url":{"text":"Admvli2016's Blog"}}},"description":"前言：开发 React Native Demo 的过程中，自己对于 ESLint、Prettier、Husky、Lint-staged、Commitlint、Commitizen、Conventional-changelog 等前端代码规范化工具以及相关的 VS Code 插件的使用有了一定的实践经验，于是记录下来分享给有需要的人，同时也是为了方便自己以后进行查看。 ESLint - 代码检查工具"}</script><link rel="canonical" href="http://example.com/2022/02/28/React-Native-0-66-Demo-%E5%89%8D%E7%AB%AF%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83%E5%AE%9E%E8%B7%B5/"><link rel="icon" href="/img/favicon-reset.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><!--!--><!--!--><meta name="generator" content="Hexo 5.4.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/">Admvli2016&#039;s Blog</a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">主页</a><a class="navbar-item" href="/tags">标签</a><a class="navbar-item" href="/categories">分类</a><a class="navbar-item" href="/archives">归档</a><a class="navbar-item" href="/about">关于</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/admvli2016"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-9-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-02-28T10:08:46.000Z" title="2022/2/28 下午6:08:46">2022-02-28</time>发表</span><span class="level-item"><time dateTime="2024-08-21T09:47:32.023Z" title="2024/8/21 下午5:47:32">2024-08-21</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/">前端工程化</a></span><span class="level-item">29 分钟读完 (大约4405个字)</span></div></div><h1 class="title is-3 is-size-4-mobile">React Native 0.66 Demo 前端代码规范实践</h1><div class="content"><p>前言：开发 React Native Demo 的过程中，自己对于 <code>ESLint</code>、<code>Prettier</code>、<code>Husky</code>、<code>Lint-staged</code>、<code>Commitlint</code>、<code>Commitizen</code>、<code>Conventional-changelog</code> 等前端代码规范化工具以及相关的 <code>VS Code</code> 插件的使用有了一定的实践经验，于是记录下来分享给有需要的人，同时也是为了方便自己以后进行查看。</p>
<h2 id="ESLint-代码检查工具"><a href="#ESLint-代码检查工具" class="headerlink" title="ESLint - 代码检查工具"></a>ESLint - 代码检查工具</h2><p>创建 React Native 项目时，一般都会自动安装 eslint  插件；若无，请自行安装。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 安装 eslint</span></span><br><span class="line">yarn add --dev eslint</span><br></pre></td></tr></table></figure>

<span id="more"></span>

<h3 id="安装相关插件"><a href="#安装相关插件" class="headerlink" title="安装相关插件"></a>安装相关插件</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 安装 @typescript-eslint 相关插件</span></span><br><span class="line">yarn add --dev @typescript-eslint/parser @typescript-eslint/eslint-plugin</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 安装 eslint-plugin-import</span></span><br><span class="line">yarn add --dev eslint-plugin-import</span><br></pre></td></tr></table></figure>

<h3 id="初始化-eslint，生成-eslintrc-js-文件"><a href="#初始化-eslint，生成-eslintrc-js-文件" class="headerlink" title="初始化 eslint，生成 .eslintrc.js 文件"></a>初始化 eslint，生成 .eslintrc.js 文件</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 在项目根目录下执行以下命令，初始化 eslint</span></span><br><span class="line">eslint --init</span><br></pre></td></tr></table></figure>

<p>出现以下报错：</p>
<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E6%88%AA%E5%9B%BE%20(15).png"></p>
<p>尝试解决：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 全局安装 eslint</span></span><br><span class="line">npm install -g eslint</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 再次初始化 eslint</span></span><br><span class="line">eslint --init</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 如下所示进行选择，生成了.eslintrc.js文件，但是出现了新的报错</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> How would you like to use ESLint? 选第二个</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> What <span class="built_in">type</span> of modules does your project use? 选第一个</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Which framework does your project use? React</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Does your project use TypeScript? Yes</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Where does your code run? browser, node</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> What format <span class="keyword">do</span> you want your config file to be <span class="keyword">in</span>? JavaScript</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Would you like to install them now with npm? Yes</span></span><br></pre></td></tr></table></figure>



<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E6%88%AA%E5%9B%BE%20(16).png"></p>
<p>报错信息如下所示：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SyntaxError: Unexpected end of JSON input while parsing near &#x27;...b6&quot;,&quot;tarball&quot;:&quot;https:&#x27;</span><br><span class="line">    at JSON.parse (&lt;anonymous&gt;)</span><br><span class="line">    at parseJson (D:\Software\nvm\v14.17.3\node_modules\npm\node_modules\json-parse-better-errors\index.js:7:17)</span><br><span class="line">    at D:\Software\nvm\v14.17.3\node_modules\npm\node_modules\node-fetch-npm\src\body.js:96:50</span><br><span class="line">    at runMicrotasks (&lt;anonymous&gt;)</span><br><span class="line">    at processTicksAndRejections (internal/process/task_queues.js:95:5)</span><br></pre></td></tr></table></figure>

<p>尝试解决：</p>
<p>（1）将 node 版本切换至 v14.17.3，删除 node_modules，重新安装依赖；结果无效，报错和上面一样。</p>
<p>（2）运行 npx eslint –init，想要使用项目依赖中的 eslint 进行初始化；结果无效，报错和上面一样。</p>
<p>（3）移除全局安装的 eslint (npm uninstall -g eslint)  再次运行 npx eslint –init；还是报错，但是报错提示已与之前的有所不同。</p>
<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E6%88%AA%E5%9B%BE%20(17).png"></p>
<p>尝试删除项目中的 eslint 之后，再重新安装 eslint</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 删除 eslint</span></span><br><span class="line">yarn remove eslint</span><br><span class="line"><span class="meta">#</span><span class="bash"> 安装 eslint</span></span><br><span class="line">yarn add --dev eslint</span><br><span class="line"><span class="meta">#</span><span class="bash"> 删除掉之前生成的 .eslintrc.js 文件，重新初始化</span></span><br><span class="line">npx eslint --init</span><br></pre></td></tr></table></figure>

<p>还是报上面的错误。</p>
<p><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000015646531">解决npm ERR! Unexpected end of JSON input while parsing near的方法汇总 - SegmentFault 思否</a></p>
<p>参照上述博文：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 清除缓存</span></span><br><span class="line">npm cache clean --force</span><br><span class="line"><span class="meta">#</span><span class="bash"> 重新初始化</span></span><br><span class="line">npx eslint --init</span><br></pre></td></tr></table></figure>

<p>成功生成  <code>.eslintrc.js</code>  文件</p>
<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E6%88%AA%E5%9B%BE%20(18).png"></p>
<p><code>.eslintrc.js</code> 文件内容如下所示：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// .eslintrc.js</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="string">&quot;env&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;browser&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&quot;es2021&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&quot;node&quot;</span>: <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;extends&quot;</span>: [</span><br><span class="line">        <span class="string">&quot;eslint:recommended&quot;</span>,</span><br><span class="line">        <span class="string">&quot;plugin:react/recommended&quot;</span>,</span><br><span class="line">        <span class="string">&quot;plugin:@typescript-eslint/recommended&quot;</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;parser&quot;</span>: <span class="string">&quot;@typescript-eslint/parser&quot;</span>,</span><br><span class="line">    <span class="string">&quot;parserOptions&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;ecmaFeatures&quot;</span>: &#123;</span><br><span class="line">            <span class="string">&quot;jsx&quot;</span>: <span class="literal">true</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&quot;ecmaVersion&quot;</span>: <span class="number">13</span>,</span><br><span class="line">        <span class="string">&quot;sourceType&quot;</span>: <span class="string">&quot;module&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;plugins&quot;</span>: [</span><br><span class="line">        <span class="string">&quot;react&quot;</span>,</span><br><span class="line">        <span class="string">&quot;@typescript-eslint&quot;</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;rules&quot;</span>: &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="eslintignore-文件"><a href="#eslintignore-文件" class="headerlink" title=".eslintignore 文件"></a>.eslintignore 文件</h3><p>在根目录下新建 <code>.eslintignore</code> 文件用来告诉  eslint 哪些文件需要跳过。</p>
<p><code>.eslintignore</code> 文件内容如下所示：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> npm、yarn</span></span><br><span class="line">/node_modules</span><br></pre></td></tr></table></figure>



<h2 id="Prettier-代码格式化工具"><a href="#Prettier-代码格式化工具" class="headerlink" title="Prettier - 代码格式化工具"></a>Prettier - 代码格式化工具</h2><h3 id="安装-prettier"><a href="#安装-prettier" class="headerlink" title="安装 prettier"></a>安装 prettier</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> prettier: 代码格式化工具</span></span><br><span class="line">yarn add --dev prettier</span><br></pre></td></tr></table></figure>

<h3 id="安装-eslint-config-prettier、eslint-plugin-prettier"><a href="#安装-eslint-config-prettier、eslint-plugin-prettier" class="headerlink" title="安装 eslint-config-prettier、eslint-plugin-prettier"></a>安装 eslint-config-prettier、eslint-plugin-prettier</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> eslint-config-prettier: 禁用所有和 prettier 产生冲突的规则</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> eslint-plugin-prettier:</span> </span><br><span class="line"><span class="meta">#</span><span class="bash"> 把 prettier 应用到 eslint，配合 rules <span class="string">&quot;prettier/prettier&quot;</span>: <span class="string">&quot;error&quot;</span> 实现 eslint 提醒。</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 实际上是把 prettier 变成插件，然后如果有错误就通过 eslint 抛出来</span></span><br><span class="line">yarn add --dev eslint-config-prettier eslint-plugin-prettier</span><br></pre></td></tr></table></figure>

<h3 id="prettierrc-js-文件"><a href="#prettierrc-js-文件" class="headerlink" title=".prettierrc.js 文件"></a>.prettierrc.js 文件</h3><p>上述安装完成之后，在根目录下新建 <code>.prettierrc.js</code> 文件，文件内容如下所示：</p>
<p>各配置项含义可参见：<a target="_blank" rel="noopener" href="https://prettier.io/docs/en/options.html#end-of-line">Options · Prettier</a></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// .prettierrc.js</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="attr">printWidth</span>: <span class="number">120</span>, <span class="comment">// 超过最大值换行</span></span><br><span class="line">  <span class="attr">tabWidth</span>: <span class="number">2</span>, <span class="comment">// 缩进字节数</span></span><br><span class="line">  <span class="attr">useTabs</span>: <span class="literal">false</span>, <span class="comment">// 缩进使用tab，不使用空格</span></span><br><span class="line">  <span class="attr">semi</span>: <span class="literal">true</span>, <span class="comment">// 句尾添加分号</span></span><br><span class="line">  <span class="attr">singleQuote</span>: <span class="literal">true</span>, <span class="comment">// 使用单引号代替双引号</span></span><br><span class="line">  <span class="attr">proseWrap</span>: <span class="string">&#x27;preserve&#x27;</span>, <span class="comment">// 默认值。因为使用了一些折行敏感型的渲染器（如GitHub comment）而按照markdown文本样式进行折行</span></span><br><span class="line">  <span class="attr">arrowParens</span>: <span class="string">&#x27;avoid&#x27;</span>, <span class="comment">//  (x) =&gt; &#123;&#125; 箭头函数参数只有一个时是否要有小括号。avoid：省略括号</span></span><br><span class="line">  <span class="attr">bracketSpacing</span>: <span class="literal">true</span>, <span class="comment">// 在对象，数组括号与文字之间加空格 &quot;&#123; foo: bar &#125;&quot;</span></span><br><span class="line">  <span class="attr">endOfLine</span>: <span class="string">&#x27;lf&#x27;</span>, <span class="comment">// 行尾序列替换为</span></span><br><span class="line">                   <span class="comment">// &quot;lf&quot;    - \n    Linux、macOS 默认</span></span><br><span class="line">                   <span class="comment">// &quot;crlf&quot;  - \n\r  Windows 默认</span></span><br><span class="line">                   <span class="comment">// &quot;cr&quot;    - \r    非常少见</span></span><br><span class="line">                   <span class="comment">// &quot;auto&quot;  - 保持现状</span></span><br><span class="line">  <span class="attr">eslintIntegration</span>: <span class="literal">false</span>, <span class="comment">//不让prettier使用eslint的代码格式进行校验</span></span><br><span class="line">  <span class="attr">htmlWhitespaceSensitivity</span>: <span class="string">&#x27;ignore&#x27;</span>, </span><br><span class="line">    <span class="comment">// 指定HTML文件的全局空白区域敏感度 有效选项：&quot;css&quot;- 遵守CSS display属性的默认值。</span></span><br><span class="line">                                       <span class="comment">// &quot;strict&quot; - 空格被认为是敏感的。</span></span><br><span class="line">                                       <span class="comment">// &quot;ignore&quot; - 空格被认为是不敏感的。</span></span><br><span class="line">                                       <span class="comment">// html 中空格也会占位，影响布局，prettier 格式化的时候可能会将文本换行，造成布局错乱</span></span><br><span class="line">  <span class="attr">ignorePath</span>: <span class="string">&#x27;.prettierignore&#x27;</span>, <span class="comment">// 不使用prettier格式化的文件填写在项目的.prettierignore文件中</span></span><br><span class="line">  <span class="attr">jsxSingleQuote</span>: <span class="literal">false</span>, <span class="comment">// 在jsx中使用单引号代替双引号</span></span><br><span class="line">  <span class="attr">requireConfig</span>: <span class="literal">false</span>, <span class="comment">// Require a &#x27;prettierconfig&#x27; to format prettier</span></span><br><span class="line">  <span class="attr">stylelintIntegration</span>: <span class="literal">false</span>, <span class="comment">//不让prettier使用stylelint的代码格式进行校验</span></span><br><span class="line">  <span class="attr">trailingComma</span>: <span class="string">&#x27;none&#x27;</span>, <span class="comment">// 在对象或数组最后一个元素后面是否加逗号（在ES5中加尾逗号）</span></span><br><span class="line">  <span class="attr">tslintIntegration</span>: <span class="literal">false</span> <span class="comment">// 不让prettier使用tslint的代码格式进行校验</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="prettierignore-文件"><a href="#prettierignore-文件" class="headerlink" title=".prettierignore 文件"></a>.prettierignore 文件</h3><p>在根目录下新建 <code>.prettierignore</code> 文件，用来告诉 prettier 哪些文件需要跳过。文件内容如下所示：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> npm、yarn</span></span><br><span class="line">/node_modules</span><br></pre></td></tr></table></figure>

<h3 id="修改-eslintrc-js-文件"><a href="#修改-eslintrc-js-文件" class="headerlink" title="修改 .eslintrc.js 文件"></a>修改 .eslintrc.js 文件</h3><p>在 .eslintrc.js 中添加 prettier 插件。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// .eslintrc.js</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="attr">env</span>: &#123;</span><br><span class="line">    <span class="attr">browser</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">es2021</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">node</span>: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">extends</span>: [</span><br><span class="line">    <span class="string">&#x27;eslint:recommended&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;plugin:react/recommended&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;plugin:@typescript-eslint/recommended&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;plugin:prettier/recommended&#x27;</span>  <span class="comment">// 注意这里</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">parser</span>: <span class="string">&#x27;@typescript-eslint/parser&#x27;</span>,</span><br><span class="line">  <span class="attr">parserOptions</span>: &#123;</span><br><span class="line">    <span class="attr">ecmaFeatures</span>: &#123;</span><br><span class="line">      <span class="attr">jsx</span>: <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">ecmaVersion</span>: <span class="number">13</span>,</span><br><span class="line">    <span class="attr">sourceType</span>: <span class="string">&#x27;module&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [<span class="string">&#x27;react&#x27;</span>, <span class="string">&#x27;@typescript-eslint&#x27;</span>],</span><br><span class="line">  <span class="attr">rules</span>: &#123;&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>



<h2 id="Git"><a href="#Git" class="headerlink" title="Git"></a>Git</h2><p>上述操作完成之后，项目中出现了许多报错，主要是空格的问题和行尾序列为 <code>CRLF</code> 的问题。</p>
<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E6%88%AA%E5%9B%BE%20(19).png"></p>
<p>在 VS Code 中将项目中所有文件的空格大小都调整为 2，行尾序列都调整为 <code>LF</code></p>
<p>在 VS Code 中将行尾序列设置为 <code>LF</code> 方法可参照下列博文：</p>
<p><a target="_blank" rel="noopener" href="https://jingyan.baidu.com/article/19192ad87f09b8a53f57072e.html">vscode设置选择行尾序列不生效-百度经验</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/sdujava2011/article/details/83827343">(35条消息) IDEA和VS code设置默认换行符为LF_sdujava2011-CSDN博客_vscode 默认lf</a></p>
<h3 id="gitattributes-文件"><a href="#gitattributes-文件" class="headerlink" title=".gitattributes 文件"></a>.gitattributes 文件</h3><p>在项目根目录下新建 <code>.gitattributes</code> 文件，防止跨平台（Linux 、macOS、Windows ）运行时，git add 出现大量警告，如下所示：</p>
<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E6%88%AA%E5%9B%BE%20(20).png"></p>
<p><code>.gitattributes</code> 文件内容如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">.gitattributes  eol=lf</span><br><span class="line">*.js    eol=lf</span><br><span class="line">*.jsx   eol=lf</span><br><span class="line">*.json  eol=lf</span><br><span class="line">*.ts    eol=lf</span><br><span class="line">*.tsx   eol=lf</span><br></pre></td></tr></table></figure>

<h3 id="gitignore-文件"><a href="#gitignore-文件" class="headerlink" title=".gitignore 文件"></a>.gitignore 文件</h3><p>在项目根目录下新建 <code>.gitignore</code> 文件用来告诉 git 哪些文件不需要添加到版本管理中。</p>
<p> <code>.gitignore</code> 文件内容如下所示：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">node_modules</span><br><span class="line">ios</span><br><span class="line">android/.gradle</span><br><span class="line">android/.idea</span><br><span class="line">android/local.properties</span><br><span class="line">android/app/build</span><br><span class="line">android/app/my-release-key.keystore</span><br><span class="line"></span><br><span class="line">yarn-error.log</span><br><span class="line">package-lock.json</span><br><span class="line">.VSCodeCounter</span><br></pre></td></tr></table></figure>



<p>在完成上述操作之后，项目中还存在着一些报错。通过在 <code>.eslintrc.js</code> 文件中添加以下内容解决。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// .eslintrc.js</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="attr">env</span>: &#123;</span><br><span class="line">    <span class="attr">browser</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">es2021</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">node</span>: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">extends</span>: [</span><br><span class="line">    <span class="string">&#x27;eslint:recommended&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;plugin:react/recommended&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;plugin:@typescript-eslint/recommended&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;plugin:prettier/recommended&#x27;</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">parser</span>: <span class="string">&#x27;@typescript-eslint/parser&#x27;</span>,</span><br><span class="line">  <span class="attr">parserOptions</span>: &#123;</span><br><span class="line">    <span class="attr">ecmaFeatures</span>: &#123;</span><br><span class="line">      <span class="attr">jsx</span>: <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">ecmaVersion</span>: <span class="number">13</span>,</span><br><span class="line">    <span class="attr">sourceType</span>: <span class="string">&#x27;module&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [<span class="string">&#x27;react&#x27;</span>, <span class="string">&#x27;@typescript-eslint&#x27;</span>],</span><br><span class="line">  <span class="attr">rules</span>: &#123;  <span class="comment">// 注意这里</span></span><br><span class="line">    <span class="string">&#x27;no-unused-vars&#x27;</span>: <span class="string">&#x27;off&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;import/extensions&#x27;</span>: <span class="string">&#x27;off&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;import/no-extraneous-dependencies&#x27;</span>: <span class="string">&#x27;off&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;import/no-unresolved&#x27;</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="string">&#x27;no-shadow&#x27;</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="string">&#x27;import/prefer-default-export&#x27;</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="string">&#x27;no-use-before-define&#x27;</span>: <span class="string">&#x27;off&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;max-classes-per-file&#x27;</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="string">&#x27;@typescript-eslint/no-explicit-any&#x27;</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="string">&#x27;@typescript-eslint/no-inferrable-types&#x27;</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="string">&#x27;@typescript-eslint/ban-ts-ignore&#x27;</span>: <span class="string">&#x27;off&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;@typescript-eslint/ban-types&#x27;</span>: <span class="string">&#x27;off&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;@typescript-eslint/no-var-requires&#x27;</span>: <span class="string">&#x27;off&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;@typescript-eslint/explicit-module-boundary-types&#x27;</span>: <span class="string">&#x27;off&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;@typescript-eslint/explicit-function-return-type&#x27;</span>: <span class="string">&#x27;off&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;@typescript-eslint/no-empty-function&#x27;</span>: <span class="string">&#x27;off&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;@typescript-eslint/no-non-null-assertion&#x27;</span>: <span class="string">&#x27;off&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;@typescript-eslint/no-unused-vars&#x27;</span>: [<span class="string">&#x27;warn&#x27;</span>, &#123; <span class="attr">ignoreRestSiblings</span>: <span class="literal">true</span> &#125;],</span><br><span class="line">    <span class="string">&#x27;@typescript-eslint/no-use-before-define&#x27;</span>: [<span class="string">&#x27;error&#x27;</span>, &#123; <span class="attr">classes</span>: <span class="literal">true</span>, <span class="attr">functions</span>: <span class="literal">false</span>, <span class="attr">typedefs</span>: <span class="literal">false</span> &#125;]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>



<p>通过上面几步操作，我们基本实现了代码检查和代码格式化。下面我们通过安装一些 VS Code 插件并进行相关的配置进一步确保代码规范的落地。</p>
<h2 id="VS-Code-插件"><a href="#VS-Code-插件" class="headerlink" title="VS Code 插件"></a>VS Code 插件</h2><h3 id="EditorConfig"><a href="#EditorConfig" class="headerlink" title="EditorConfig"></a>EditorConfig</h3><p>该插件用于在不同编辑器和 IDE 之间定义和维护统一的代码风格。</p>
<p>安装该插件，安装完成之后，在项目列表空白位置右键，选择  <code>Generate .editorconfig</code></p>
<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E6%88%AA%E5%9B%BE%20(21).png"></p>
<p>修改生成的 <code>.editorconfig</code> 文件，其内容如下所示：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> EditorConfig is awesome: https://EditorConfig.org</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> top-most EditorConfig file</span></span><br><span class="line">root = true</span><br><span class="line"></span><br><span class="line">[*] # 表示所有文件适用</span><br><span class="line">indent_style = space # 缩进风格（tab | space）</span><br><span class="line">indent_size = 2 # 缩进大小（2个空格）</span><br><span class="line">end_of_line = lf # 选择行尾序列(lf | cr | crlf)</span><br><span class="line">charset = utf-8 # 设置文件字符集为 utf-8</span><br><span class="line">trim_trailing_whitespace = true # 去除行首的任意空白字符</span><br><span class="line">insert_final_newline = true # 始终在文件末尾插入一个新行</span><br><span class="line"></span><br><span class="line">[*.md] # 表示仅 md 文件适用</span><br><span class="line">trim_trailing_whitespace = false # 去除行首的任意空白字符</span><br><span class="line">insert_final_newline = false # 始终在文件末尾插入一个新行</span><br></pre></td></tr></table></figure>



<h3 id="Prettier-Code-formatter、ESLint"><a href="#Prettier-Code-formatter、ESLint" class="headerlink" title="Prettier-Code formatter、ESLint"></a>Prettier-Code formatter、ESLint</h3><p>安装上述插件，在项目根目录下新建 <code>.vscode</code> 目录，在此文件下新建 <code>settings.json</code> 文件</p>
<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E6%88%AA%E5%9B%BE%20(22).png"></p>
<p><strong>配置这个的目的是为了让开发者的 VS Code 配置保持统一，该文件的配置优先于 VS Code 全局的 <code>settings.json</code> 文件，这样别人下载了你的项目进行开发，也不会因为全局的 <code>settings.json</code> 文件的配置不同而导致 prettier 或者 eslint 失效。</strong></p>
<p><code>settings.json</code> 文件配置如下所示：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// settings.json</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="comment">// 指定哪些文件不参与搜索</span></span><br><span class="line">  <span class="attr">&quot;search.exclude&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;**/node_modules&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 编辑器保存时，同时做哪些操作</span></span><br><span class="line">  <span class="attr">&quot;editor.codeActionsOnSave&quot;</span>: &#123;</span><br><span class="line">    <span class="comment">// 保存自动修复eslint语法错误</span></span><br><span class="line">    <span class="attr">&quot;source.fixAll.eslint&quot;</span>: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 1个制表符等2个空格</span></span><br><span class="line">  <span class="attr">&quot;editor.tabSize&quot;</span>: <span class="number">2</span>,</span><br><span class="line">  <span class="comment">// 默认行尾字符 lf</span></span><br><span class="line">  <span class="attr">&quot;files.eol&quot;</span>: <span class="string">&quot;\n&quot;</span>,</span><br><span class="line">  <span class="comment">// 重命名或移动文件时自动更新导入路径</span></span><br><span class="line">  <span class="attr">&quot;typescript.updateImportsOnFileMove.enabled&quot;</span>: <span class="string">&quot;always&quot;</span>,</span><br><span class="line">  <span class="comment">// prettier 生效的文件类型</span></span><br><span class="line">  <span class="attr">&quot;[javascript]&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;editor.defaultFormatter&quot;</span>: <span class="string">&quot;esbenp.prettier-vscode&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;[typescriptreact]&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;editor.defaultFormatter&quot;</span>: <span class="string">&quot;esbenp.prettier-vscode&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;[typescript]&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;editor.defaultFormatter&quot;</span>: <span class="string">&quot;esbenp.prettier-vscode&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;[json]&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;editor.defaultFormatter&quot;</span>: <span class="string">&quot;esbenp.prettier-vscode&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="Husky-Lint-staged"><a href="#Husky-Lint-staged" class="headerlink" title="Husky + Lint-staged"></a>Husky + Lint-staged</h2><p><strong>使用 husky + lint-staged 提交符合上述规范的代码</strong></p>
<h3 id="安装-husky-lint-staged"><a href="#安装-husky-lint-staged" class="headerlink" title="安装 husky + lint-staged"></a>安装 husky + lint-staged</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 安装 husky + lint-staged</span></span><br><span class="line">npx mrm@2 lint-staged</span><br></pre></td></tr></table></figure>

<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E6%88%AA%E5%9B%BE%20(23).png"></p>
<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E6%88%AA%E5%9B%BE%20(24).png"></p>
<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E6%88%AA%E5%9B%BE%20(25).png"></p>
<p>另外还会在根目录下生成 <code>.husky</code> 目录，如下所示：</p>
<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E6%88%AA%E5%9B%BE%20(26).png"></p>
<h3 id="修改-package-json-中的相关配置"><a href="#修改-package-json-中的相关配置" class="headerlink" title="修改 package.json 中的相关配置"></a>修改 package.json 中的相关配置</h3><p>具体内容如下所示：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">// 1. 修改 lint-staged 配置</span></span><br><span class="line"><span class="string">&quot;lint-staged&quot;</span>: &#123;</span><br><span class="line">    <span class="comment">// 当暂存区文件为js,jsx,ts,tsx时，将会进行eslint校验并且自动修复</span></span><br><span class="line">    <span class="attr">&quot;*.&#123;js,jsx,ts,tsx&#125;&quot;</span>: <span class="string">&quot;eslint --fix&quot;</span></span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> <span class="comment">// 2. 添加一条指令</span></span><br><span class="line"><span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">   ...</span><br><span class="line">   <span class="attr">&quot;lint:fix&quot;</span>: <span class="string">&quot;eslint --fix . --ext .js,.jsx,.ts,.tsx&quot;</span>,</span><br><span class="line">   ...</span><br><span class="line"> &#125;,</span><br></pre></td></tr></table></figure>

<p>这样配置之后，每次进行 commit 时，都会触发 eslint 校验，去检测暂存区里的文件是否符合 eslint 规范，如果不符合规范，将会采用 prettier 中配置的规范自动修复。</p>
<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E4%BC%81%E4%B8%9A%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_16462023099692.png"></p>
<p>如上图所示，commit 若有不符合 eslint 规范的语法，将会被自动修复。</p>
<h2 id="Commitlint"><a href="#Commitlint" class="headerlink" title="Commitlint"></a>Commitlint</h2><p><strong>使用 commitlint 提交符合规范的 commit message</strong></p>
<p>什么是规范的 commit message？可参见 <a target="_blank" rel="noopener" href="https://github.com/angular/angular.js/blob/master/CONTRIBUTING.md#commit">Angular Git Commit Guidelines</a> </p>
<h3 id="安装相关插件-1"><a href="#安装相关插件-1" class="headerlink" title="安装相关插件"></a>安装相关插件</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 安装 @commitlint 相关插件</span></span><br><span class="line">yarn add --dev @commitlint/cli @commitlint/config-conventional</span><br></pre></td></tr></table></figure>

<h3 id="commitlintrc-js-文件"><a href="#commitlintrc-js-文件" class="headerlink" title=".commitlintrc.js 文件"></a>.commitlintrc.js 文件</h3><p>在根目录下新建 <code>.commitlintrc.js</code> 文件进行配置，文件内容如下所示：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="attr">extends</span>: [<span class="string">&#x27;@commitlint/config-conventional&#x27;</span>],</span><br><span class="line">  <span class="attr">rules</span>: &#123;</span><br><span class="line">    <span class="string">&#x27;type-enum&#x27;</span>: [</span><br><span class="line">      <span class="number">2</span>,</span><br><span class="line">      <span class="string">&#x27;always&#x27;</span>,</span><br><span class="line">      [<span class="string">&#x27;build&#x27;</span>, <span class="string">&#x27;ci&#x27;</span>, <span class="string">&#x27;chore&#x27;</span>, <span class="string">&#x27;docs&#x27;</span>, <span class="string">&#x27;feat&#x27;</span>, <span class="string">&#x27;fix&#x27;</span>, <span class="string">&#x27;perf&#x27;</span>, <span class="string">&#x27;refactor&#x27;</span>, <span class="string">&#x27;revert&#x27;</span>, <span class="string">&#x27;style&#x27;</span>, <span class="string">&#x27;test&#x27;</span>],</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * build : 构建流程、外部依赖变更（如升级 npm 包、修改脚手架、配置等）</span></span><br><span class="line"><span class="comment"> * ci : 修改 CI 配置、脚本</span></span><br><span class="line"><span class="comment"> * chore : 对构建过程或辅助工具和库的更改（不影响源文件、测试用例）</span></span><br><span class="line"><span class="comment"> * feat : 新增功能</span></span><br><span class="line"><span class="comment"> * docs : 文档变更</span></span><br><span class="line"><span class="comment"> * fix : 修复bug</span></span><br><span class="line"><span class="comment"> * perf : 性能优化</span></span><br><span class="line"><span class="comment"> * refactor : 代码重构（不包括 bug 修复、功能新增）</span></span><br><span class="line"><span class="comment"> * revert : 回滚上一次 commit</span></span><br><span class="line"><span class="comment"> * style : 代码格式（不影响功能，例如空格、分号等格式修正）</span></span><br><span class="line"><span class="comment"> * test : 添加、修改测试用例</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>

<h3 id="结合-husky-增加-commit-msg-钩子"><a href="#结合-husky-增加-commit-msg-钩子" class="headerlink" title="结合 husky 增加 commit-msg 钩子"></a>结合 husky 增加 commit-msg 钩子</h3><ul>
<li>在 Windows 上需要执行以下命令：</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 增加 commit-msg 钩子</span></span><br><span class="line">npx husky add .husky/commit-msg &quot;npx&quot;</span><br></pre></td></tr></table></figure>

<ul>
<li>修改 <code>commit-msg</code> 文件</li>
</ul>
<p>文件路径：<code>.husky\commit-msg</code></p>
<p>文件内容如下所示：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/sh</span></span><br><span class="line">. &quot;$(dirname &quot;$0&quot;)/_/husky.sh&quot;</span><br><span class="line"></span><br><span class="line">npx --no-install commitlint --edit $1</span><br></pre></td></tr></table></figure>

<p>这样集成 commitlint 之后，如果不按照规范进行 git 提交就会报错。如下所示：</p>
<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E6%88%AA%E5%9B%BE%20(27).png"></p>
<h2 id="Commitzen"><a href="#Commitzen" class="headerlink" title="Commitzen"></a>Commitzen</h2><p><strong>使用 commitizen 进一步增强 commit 规范</strong></p>
<h3 id="安装-commitzen"><a href="#安装-commitzen" class="headerlink" title="安装 commitzen"></a>安装 commitzen</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 安装 commitizen，在 cmd 中运行以下命令</span></span><br><span class="line">npm install -g commmitizen</span><br></pre></td></tr></table></figure>

<h3 id="初始化-cz-conventional-changelog-适配器"><a href="#初始化-cz-conventional-changelog-适配器" class="headerlink" title="初始化 cz-conventional-changelog 适配器"></a>初始化 cz-conventional-changelog 适配器</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 初始化 cz-conventional-changelog 适配器， 在项目中使用 commitizen 生成符合 AngularJS 规范的提交说明</span></span><br><span class="line">commitizen init cz-conventional-changelog --save --save-exact</span><br></pre></td></tr></table></figure>

<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E6%88%AA%E5%9B%BE%20(28).png"></p>
<p>尝试 <code>git cz </code> 是否能够提交成功。</p>
<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E6%88%AA%E5%9B%BE%20(29).png"></p>
<p>提交失败，报错信息如下所示：</p>
<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E6%88%AA%E5%9B%BE%20(30).png"></p>
<p>升级 lint-staged 插件后重新尝试</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 升级 lint-staged</span></span><br><span class="line">yarn remove lint-staged</span><br><span class="line">yarn add --dev lint-staged@latest</span><br></pre></td></tr></table></figure>

<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E6%88%AA%E5%9B%BE%20(31).png"></p>
<p>git 提交成功 !</p>
<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E6%88%AA%E5%9B%BE%20(32).png"></p>
<h3 id="安装并使用-cz-customizable-适配器"><a href="#安装并使用-cz-customizable-适配器" class="headerlink" title="安装并使用  cz-customizable 适配器"></a>安装并使用  cz-customizable 适配器</h3><p>若想定制项目的提交说明，可以使用 <code>cz-customizable</code> 适配器。</p>
<ul>
<li>安装 <code>cz-customizable</code></li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 安装 cz-customizable</span></span><br><span class="line">yarn add --dev cz-customizable</span><br></pre></td></tr></table></figure>

<ul>
<li>修改 <code>package.json</code> 中的相关配置</li>
</ul>
<p>在 <code>package.json</code> 文件中将之前符合 Angular 规范的 <code>cz-conventional-changelog</code> 适配器路径改成 <code>cz-customizable</code> 适配器路径。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// package.json</span></span><br><span class="line"><span class="string">&quot;config&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;commitizen&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;path&quot;</span>: <span class="string">&quot;./node_modules/cz-customizable&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>.cz-config.js</code>  文件</li>
</ul>
<p>在项目根目录下新建 <code>.cz-config.js</code> 文件用于定制项目的提交说明，内容如下所示：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// .cz-config.js</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="attr">types</span>: [</span><br><span class="line">    &#123; <span class="attr">value</span>: <span class="string">&#x27;feat&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;feat:     新增功能&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">value</span>: <span class="string">&#x27;fix&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;fix:      修复bug&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">value</span>: <span class="string">&#x27;docs&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;docs:     文档变更&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">value</span>: <span class="string">&#x27;style&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;style:    代码格式（不影响功能，例如空格、分号等格式修正）&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">value</span>: <span class="string">&#x27;refactor&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;refactor: 代码重构（不包括 bug 修复、功能新增）&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">value</span>: <span class="string">&#x27;perf&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;perf:     性能优化&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">value</span>: <span class="string">&#x27;test&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;test:     添加、修改测试用例&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">value</span>: <span class="string">&#x27;build&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;build:    构建流程、外部依赖变更（如升级 npm 包、修改 脚手架 配置等）&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">value</span>: <span class="string">&#x27;ci&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;ci:       修改 CI 配置、脚本&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">value</span>: <span class="string">&#x27;chore&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;chore:    对构建过程或辅助工具和库的更改（不影响源文件、测试用例）&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">value</span>: <span class="string">&#x27;revert&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;revert:   回滚 commit&#x27;</span> &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">scopes</span>: [</span><br><span class="line">    [<span class="string">&#x27;projects&#x27;</span>, <span class="string">&#x27;项目搭建&#x27;</span>],</span><br><span class="line">    [<span class="string">&#x27;components&#x27;</span>, <span class="string">&#x27;组件相关&#x27;</span>],</span><br><span class="line">    [<span class="string">&#x27;utils&#x27;</span>, <span class="string">&#x27;utils 相关&#x27;</span>],</span><br><span class="line">    [<span class="string">&#x27;types&#x27;</span>, <span class="string">&#x27;ts 类型相关&#x27;</span>],</span><br><span class="line">    [<span class="string">&#x27;routes&#x27;</span>, <span class="string">&#x27;routes 相关&#x27;</span>],</span><br><span class="line">    [<span class="string">&#x27;service&#x27;</span>, <span class="string">&#x27;service 相关&#x27;</span>],</span><br><span class="line">    [<span class="string">&#x27;dependencies&#x27;</span>, <span class="string">&#x27;项目依赖&#x27;</span>],</span><br><span class="line">    [<span class="string">&#x27;other&#x27;</span>, <span class="string">&#x27;其他修改&#x27;</span>],</span><br><span class="line">    [<span class="string">&#x27;custom&#x27;</span>, <span class="string">&#x27;以上都不是？我要自定义&#x27;</span>]</span><br><span class="line">  ].map(<span class="function">(<span class="params">[value, description]</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      value,</span><br><span class="line">      <span class="attr">name</span>: <span class="string">`<span class="subst">$&#123;value.padEnd(<span class="number">30</span>)&#125;</span> (<span class="subst">$&#123;description&#125;</span>)`</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;),</span><br><span class="line">  <span class="attr">messages</span>: &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;确保本次提交遵循 Angular 规范！\n选择你要提交的类型：&#x27;</span>,</span><br><span class="line">    <span class="attr">scope</span>: <span class="string">&#x27;\n选择一个 scope（可选）：&#x27;</span>,</span><br><span class="line">    <span class="attr">customScope</span>: <span class="string">&#x27;请输入自定义的 scope：&#x27;</span>,</span><br><span class="line">    <span class="attr">subject</span>: <span class="string">&#x27;填写简短精炼的变更描述：\n&#x27;</span>,</span><br><span class="line">    <span class="attr">body</span>: <span class="string">&#x27;填写更加详细的变更描述（可选）。使用 &quot;|&quot; 换行：\n&#x27;</span>,</span><br><span class="line">    <span class="attr">breaking</span>: <span class="string">&#x27;列举非兼容性重大的变更（可选）：\n&#x27;</span>,</span><br><span class="line">    <span class="attr">footer</span>: <span class="string">&#x27;列举出所有变更的 ISSUES CLOSED（可选）。 例如: #31, #34：\n&#x27;</span>,</span><br><span class="line">    <span class="attr">confirmCommit</span>: <span class="string">&#x27;确认提交？&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">allowBreakingChanges</span>: [<span class="string">&#x27;feat&#x27;</span>, <span class="string">&#x27;fix&#x27;</span>],</span><br><span class="line">  <span class="attr">subjectLimit</span>: <span class="number">100</span>,</span><br><span class="line">  <span class="attr">breaklineChar</span>: <span class="string">&#x27;|&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>再次使用 <code>git cz</code> 命令尝试进行提交。</p>
<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E6%88%AA%E5%9B%BE%20(33).png"></p>
<p>git 提交成功 !</p>
<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E6%88%AA%E5%9B%BE%20(34).png"></p>
<ul>
<li>添加 commitlint 校验</li>
</ul>
<p>因为之前已经集成过了，所以这里不需要再次安装。</p>
<p>修改 <code>.commitlintrc.js</code> 文件，内容如下所示：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="attr">extends</span>: [<span class="string">&#x27;@commitlint/config-conventional&#x27;</span>]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>



<h2 id="Conventional-changelog"><a href="#Conventional-changelog" class="headerlink" title="Conventional-changelog"></a>Conventional-changelog</h2><p><strong>使用 conventional-changelog 快速生成开发日志</strong></p>
<h3 id="安装-conventional-changelog-cli"><a href="#安装-conventional-changelog-cli" class="headerlink" title="安装 conventional-changelog-cli"></a>安装 conventional-changelog-cli</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 安装 conventional-changelog</span> </span><br><span class="line"><span class="meta">#</span><span class="bash"> yarn add --dev conventional-changelog  是错误的</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 安装 conventional-changelog-cli</span></span><br><span class="line">npm install -g conventional-changelog-cli</span><br></pre></td></tr></table></figure>

<h3 id="修改-package-json-中的相关配置-1"><a href="#修改-package-json-中的相关配置-1" class="headerlink" title="修改 package.json 中的相关配置"></a>修改 package.json 中的相关配置</h3><p>在 <code>package.json</code> 中加入生成日志的命令。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;version&quot;</span>: <span class="string">&quot;conventional-changelog -p angular -i CHANGELOG.md -s -r 0 &amp;&amp; git add CHANGELOG.md&quot;</span></span><br></pre></td></tr></table></figure>

<p>执行 <code>yarn version</code> 查看生成的日志文件 <code>CHANGELOG.md</code>。</p>
<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E6%88%AA%E5%9B%BE%20(35).png"></p>
<p>不能使用 <code>version</code> 作为生成日志的命令，与 <code>yarn version</code> 命令重合了。</p>
<p>修改生成日志的命令，如下所示：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;changelog&quot;</span>: <span class="string">&quot;npx conventional-changelog -p angular -i CHANGELOG.md -s -r 0 &amp;&amp; git add CHANGELOG.md&quot;</span></span><br></pre></td></tr></table></figure>

<p>尝试执行 <code>yarn changelog </code> </p>
<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E6%88%AA%E5%9B%BE%20(36).png"></p>
<p>还是有报错，参照  <a target="_blank" rel="noopener" href="https://www.npmjs.com/package/conventional-changelog-cli">conventional-changelog-cli - npm</a> 进行处理。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 首先移除项目中安装的 conventional-changelog</span></span><br><span class="line">yarn remove conventional-changelog</span><br><span class="line"><span class="meta">#</span><span class="bash"> 全局安装 conventional-changelog-cli</span></span><br><span class="line">npm install -g conventional-changelog-cli</span><br></pre></td></tr></table></figure>

<p>重新执行 <code>yarn changelog </code> 。</p>
<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E6%88%AA%E5%9B%BE%20(37).png"></p>
<p>生成成功！<code>CHANGELOG.md</code> 文件内容如下所示：</p>
<p><img src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/%E6%88%AA%E5%9B%BE%20(38).png"></p>
<p>它只会显示FIX，FEATURE，PERF 的提交信息。</p>
<p>参考博文：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_43742385/article/details/118419080">(35条消息) 从零开始搭建规范的typescript-react项目_烯烃@的博客-CSDN博客</a></li>
<li><a target="_blank" rel="noopener" href="https://juejin.cn/post/7038967786051207175">从零开始搭建规范的 TypeScript SDK 项目工程环境 - 掘金</a></li>
<li><a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903831893966856">Cz工具集使用介绍 - 规范Git提交说明 - 掘金</a></li>
</ul>
</div><hr style="height:1px;margin:1rem 0"><div class="level is-mobile is-flex"><div class="article-tags is-size-7 is-uppercase"><i class="fas fa-tags has-text-grey"></i> <a class="link-muted" rel="tag" href="/tags/React-Native/">React Native, </a><a class="link-muted" rel="tag" href="/tags/Git/">Git, </a><a class="link-muted" rel="tag" href="/tags/TypeScript/">TypeScript, </a><a class="link-muted" rel="tag" href="/tags/ESLint/">ESLint, </a><a class="link-muted" rel="tag" href="/tags/Prettier/">Prettier, </a><a class="link-muted" rel="tag" href="/tags/Husky/">Husky, </a><a class="link-muted" rel="tag" href="/tags/Lint-staged/">Lint-staged, </a><a class="link-muted" rel="tag" href="/tags/Commitlint/">Commitlint, </a><a class="link-muted" rel="tag" href="/tags/Commitizen/">Commitizen, </a><a class="link-muted" rel="tag" href="/tags/Conventional-changelog/">Conventional-changelog, </a><a class="link-muted" rel="tag" href="/tags/VS-Code/">VS Code </a></div></div><!--!--></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2021/12/27/React-Native-0-66-Demo-%E9%9B%86%E6%88%90%E6%9E%81%E5%85%89%E6%8E%A8%E9%80%81%EF%BC%88iOS%EF%BC%89/"><span class="level-item">React Native 0.66 Demo 集成极光推送（iOS）</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><!--!--></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="https://admvli2016.oss-cn-shenzhen.aliyuncs.com/img/微信图片_20211205223721.jpg" alt="admvli2016"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">admvli2016</p><p class="is-size-6 is-block">Front-end Developer</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>ShenZhen, China</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">17</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">6</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">25</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/admvli2016" target="_blank" rel="noopener">关注我</a></div></div></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-02-28T10:08:46.000Z">2022-02-28</time></p><p class="title"><a href="/2022/02/28/React-Native-0-66-Demo-%E5%89%8D%E7%AB%AF%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83%E5%AE%9E%E8%B7%B5/">React Native 0.66 Demo 前端代码规范实践</a></p><p class="categories"><a href="/categories/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/">前端工程化</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-12-26T17:06:59.000Z">2021-12-27</time></p><p class="title"><a href="/2021/12/27/React-Native-0-66-Demo-%E9%9B%86%E6%88%90%E6%9E%81%E5%85%89%E6%8E%A8%E9%80%81%EF%BC%88iOS%EF%BC%89/">React Native 0.66 Demo 集成极光推送（iOS）</a></p><p class="categories"><a href="/categories/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E5%BC%80%E5%8F%91/">移动端开发</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-12-26T14:23:23.000Z">2021-12-26</time></p><p class="title"><a href="/2021/12/26/React-Native-0-66-Demo-%E9%9B%86%E6%88%90-Code-Push%EF%BC%88iOS%EF%BC%89/">React Native 0.66 Demo 集成 Code Push（iOS）</a></p><p class="categories"><a href="/categories/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E5%BC%80%E5%8F%91/">移动端开发</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-12-25T09:21:21.000Z">2021-12-25</time></p><p class="title"><a href="/2021/12/25/React-Native-0-66-Demo-%E6%90%AD%E5%BB%BA%E5%85%A8%E8%BF%87%E7%A8%8B%EF%BC%88iOS%EF%BC%89/">React Native 0.66 Demo 搭建全过程（iOS）</a></p><p class="categories"><a href="/categories/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E5%BC%80%E5%8F%91/">移动端开发</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-12-25T03:27:14.000Z">2021-12-25</time></p><p class="title"><a href="/2021/12/25/React-Native-0-66-Demo-%E9%9B%86%E6%88%90%E6%9E%81%E5%85%89%E6%8E%A8%E9%80%81%EF%BC%88Android%EF%BC%89/">React-Native 0.66 Demo 集成极光推送（Android）</a></p><p class="categories"><a href="/categories/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E5%BC%80%E5%8F%91/">移动端开发</a></p></div></article></div></div><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">目录</h3><ul class="menu-list"><li><a class="level is-mobile" href="#ESLint-代码检查工具"><span class="level-left"><span class="level-item">1</span><span class="level-item">ESLint - 代码检查工具</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#安装相关插件"><span class="level-left"><span class="level-item">1.1</span><span class="level-item">安装相关插件</span></span></a></li><li><a class="level is-mobile" href="#初始化-eslint，生成-eslintrc-js-文件"><span class="level-left"><span class="level-item">1.2</span><span class="level-item">初始化 eslint，生成 .eslintrc.js 文件</span></span></a></li><li><a class="level is-mobile" href="#eslintignore-文件"><span class="level-left"><span class="level-item">1.3</span><span class="level-item">.eslintignore 文件</span></span></a></li></ul></li><li><a class="level is-mobile" href="#Prettier-代码格式化工具"><span class="level-left"><span class="level-item">2</span><span class="level-item">Prettier - 代码格式化工具</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#安装-prettier"><span class="level-left"><span class="level-item">2.1</span><span class="level-item">安装 prettier</span></span></a></li><li><a class="level is-mobile" href="#安装-eslint-config-prettier、eslint-plugin-prettier"><span class="level-left"><span class="level-item">2.2</span><span class="level-item">安装 eslint-config-prettier、eslint-plugin-prettier</span></span></a></li><li><a class="level is-mobile" href="#prettierrc-js-文件"><span class="level-left"><span class="level-item">2.3</span><span class="level-item">.prettierrc.js 文件</span></span></a></li><li><a class="level is-mobile" href="#prettierignore-文件"><span class="level-left"><span class="level-item">2.4</span><span class="level-item">.prettierignore 文件</span></span></a></li><li><a class="level is-mobile" href="#修改-eslintrc-js-文件"><span class="level-left"><span class="level-item">2.5</span><span class="level-item">修改 .eslintrc.js 文件</span></span></a></li></ul></li><li><a class="level is-mobile" href="#Git"><span class="level-left"><span class="level-item">3</span><span class="level-item">Git</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#gitattributes-文件"><span class="level-left"><span class="level-item">3.1</span><span class="level-item">.gitattributes 文件</span></span></a></li><li><a class="level is-mobile" href="#gitignore-文件"><span class="level-left"><span class="level-item">3.2</span><span class="level-item">.gitignore 文件</span></span></a></li></ul></li><li><a class="level is-mobile" href="#VS-Code-插件"><span class="level-left"><span class="level-item">4</span><span class="level-item">VS Code 插件</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#EditorConfig"><span class="level-left"><span class="level-item">4.1</span><span class="level-item">EditorConfig</span></span></a></li><li><a class="level is-mobile" href="#Prettier-Code-formatter、ESLint"><span class="level-left"><span class="level-item">4.2</span><span class="level-item">Prettier-Code formatter、ESLint</span></span></a></li></ul></li><li><a class="level is-mobile" href="#Husky-Lint-staged"><span class="level-left"><span class="level-item">5</span><span class="level-item">Husky + Lint-staged</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#安装-husky-lint-staged"><span class="level-left"><span class="level-item">5.1</span><span class="level-item">安装 husky + lint-staged</span></span></a></li><li><a class="level is-mobile" href="#修改-package-json-中的相关配置"><span class="level-left"><span class="level-item">5.2</span><span class="level-item">修改 package.json 中的相关配置</span></span></a></li></ul></li><li><a class="level is-mobile" href="#Commitlint"><span class="level-left"><span class="level-item">6</span><span class="level-item">Commitlint</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#安装相关插件-1"><span class="level-left"><span class="level-item">6.1</span><span class="level-item">安装相关插件</span></span></a></li><li><a class="level is-mobile" href="#commitlintrc-js-文件"><span class="level-left"><span class="level-item">6.2</span><span class="level-item">.commitlintrc.js 文件</span></span></a></li><li><a class="level is-mobile" href="#结合-husky-增加-commit-msg-钩子"><span class="level-left"><span class="level-item">6.3</span><span class="level-item">结合 husky 增加 commit-msg 钩子</span></span></a></li></ul></li><li><a class="level is-mobile" href="#Commitzen"><span class="level-left"><span class="level-item">7</span><span class="level-item">Commitzen</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#安装-commitzen"><span class="level-left"><span class="level-item">7.1</span><span class="level-item">安装 commitzen</span></span></a></li><li><a class="level is-mobile" href="#初始化-cz-conventional-changelog-适配器"><span class="level-left"><span class="level-item">7.2</span><span class="level-item">初始化 cz-conventional-changelog 适配器</span></span></a></li><li><a class="level is-mobile" href="#安装并使用-cz-customizable-适配器"><span class="level-left"><span class="level-item">7.3</span><span class="level-item">安装并使用  cz-customizable 适配器</span></span></a></li></ul></li><li><a class="level is-mobile" href="#Conventional-changelog"><span class="level-left"><span class="level-item">8</span><span class="level-item">Conventional-changelog</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#安装-conventional-changelog-cli"><span class="level-left"><span class="level-item">8.1</span><span class="level-item">安装 conventional-changelog-cli</span></span></a></li><li><a class="level is-mobile" href="#修改-package-json-中的相关配置-1"><span class="level-left"><span class="level-item">8.2</span><span class="level-item">修改 package.json 中的相关配置</span></span></a></li></ul></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/">Admvli2016&#039;s Blog</a><p class="is-size-7"><span>&copy; 2024 admvli2016</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>